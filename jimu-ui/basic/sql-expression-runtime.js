define(["jimu-core","jimu-ui"],(function(e,t){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=806)}({0:function(t,r){t.exports=e},140:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),a=[n.ClauseSourceType.SingleSelectFromUnique,n.ClauseSourceType.MultipleSelectFromUnique];function o(e){return(e=e.toLowerCase()).replace(/\_(\w)/g,(function(e,t){return t.toUpperCase()}))}function s(e,t,r){var a,o=(t.alias||t.name)+" "+r;if(e.displayType===n.ClauseDisplayType.UseLabel){var s=null===(a=e.valueOptions)||void 0===a?void 0:a.value;if(s)o=o+" "+s.map((function(e){return t.type===n.JimuFieldType.String?"'"+e.label+"'":e.label})).join(",")}return o}function l(e,t,r){if("1.1.0"===t&&!e.displayType)if(e.askForValueOptions){if(e.displayType=n.ClauseDisplayType.UseAskForValue,""!==e.askForValueOptions.label){var a=s(e,e.jimuFieldName?n.Immutable(r.getSchema().fields[e.jimuFieldName]):null,n.i18n.getIntl().formatMessage({id:o(e.operator)}));e.askForValueOptions.label===a&&(e.askForValueOptions.label=null),e.askForValueOptions.label=null}}else e.displayType=n.ClauseDisplayType.None}t.getClauseArrayByChange=function(e,t,r){var n=r.split("_"),a=parseInt(n[n.length-1]),o=e.slice(0,a);return t&&(o=o.concat(t)),o=o.concat(e.slice(a+1,e.length))},t.getCamelCase=o,t.getCascadeSQL=function(e,t,r,o){var s=null;if(a.indexOf(t.valueOptions.sourceType)>=0&&t.askForValueOptions&&t.askForValueOptions.cascade!==n.ClauseCascade.None){var l=function(e,t,r){var a={sql:"",logicalOperator:e.logicalOperator,parts:[]},o=t.askForValueOptions.cascade,s=r.split("_"),l=null,i=parseInt(s[1]);return s.length>2&&(l=parseInt(s[1]),i=parseInt(s[3])),o===n.ClauseCascade.Previous?e.parts.some((function(e,t){if(l)if(t<l)a.parts.push(e);else{if(t!==l)return!0;var r=e,n={type:r.type,logicalOperator:r.logicalOperator,parts:[]};r.parts.some((function(e,t){if(!(t<i))return!0;n.parts.push(e)})),a.parts.push(n)}else{if(!(t<i))return!0;a.parts.push(e)}})):o===n.ClauseCascade.All&&e.parts.some((function(e,t){if(l)if(t!==l)a.parts.push(e);else{var r=e,n={type:r.type,logicalOperator:r.logicalOperator,parts:[]};r.parts.some((function(e,t){t!==i&&n.parts.push(e)})),a.parts.push(n)}else t!==i&&a.parts.push(e)})),a}(e,t,r);s=n.dataSourceUtils.getArcGISSQL(n.Immutable(l),o).sql}return s},t.getJimuFieldNamesBySqlExpression=function(e){if(!e)return[];var t={};return function e(r){r.parts&&r.parts.forEach((function(r){r.type===n.ClauseType.Set?e(r):t[r.jimuFieldName]=!0}))}(e),Object.keys(t).map((function(e){return e}))},t.isSqlExpressionValid=function(e){var t=!0;return e?(function e(r){r.parts&&r.parts.forEach((function(r){r.type===n.ClauseType.Set?e(r):r.valueOptions.isValid||(t=!1)}))}(e),t):t},t.getClauseLabel=function(e,t,r){var a=e.displayType,o=e.displayLabel,l=e.askForValueOptions,i="";return a!==n.ClauseDisplayType.None&&null===(i=a===n.ClauseDisplayType.UseAskForValue?l.label:o)&&(i=s(e,t,r)),i},t.getClauseDefaultLabel=s,t.updateSQLExpressionByVersion=function(e,t,r){if(e.parts){var a=e.asMutable({deep:!0});return a.parts.map((function(e){e.type===n.ClauseType.Set?e.parts.forEach((function(e){l(e,t,r)})):l(e,t,r)})),a}return null}},3:function(e,r){e.exports=t},498:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(64),l=r(56),i=function(e){function t(t){var r=e.call(this,t)||this;return r.getInputEditor=function(e){var t="";switch(e){case s.ClauseInputEditor.DatePicker:case s.ClauseInputEditor.DoubleDatePicker:t="date";break;case s.ClauseInputEditor.DateTimePicker:case s.ClauseInputEditor.DoubleDateTimePicker:t="datetime";break;default:t=null}return t},r.getFormatedValue=function(){var e;if(r.state.displayUI&&r.props.value&&r.props.value.value){var t=new Date(r.props.value.value[0].value),n=o.dataSourceUtils.getLocalTimes(t),a=new Date(n);if(r.state.displayUI.indexOf("time")<0&&0!==a.getHours())return r.onChange(n),null;e=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),r.state.displayUI.indexOf("time")>=0&&(e=e+"T"+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2)),e=new Date(e)}return e||new Date},r.checkIfTimezoneChanged=function(){var e=!1;if(r.state.displayUI&&r.props.value&&r.props.value.value){var t=new Date(r.props.value.value[0].value),n=o.dataSourceUtils.getLocalTimes(t),a=new Date(n);r.state.displayUI.indexOf("time")<0&&0!==a.getHours()&&(r.onChange(t.getTime()),e=!0)}return e},r.onChange=function(e,t){var n=e?[{value:e,label:t||""}]:null,a=l.getDefaultClauseValObj(r.props.value.sourceType,r.props.value.inputEditor,n);r.props&&r.props.onChange(a)},r.state={DatePicker:null,displayUI:null},r}return a(t,e),t.prototype.componentDidMount=function(){var e=this;this.__unmount=!1,o.moduleLoader.loadModule("jimu-ui/basic/date-picker").then((function(t){e.__unmount||(e.props.value.inputEditor?e.setState({DatePicker:t.DatePicker,displayUI:e.getInputEditor(e.props.value.inputEditor)}):e.setState({DatePicker:t.DatePicker}))}))},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.componentDidUpdate=function(e,t){this.__unmount||this.props.fieldObj===e.fieldObj&&this.props.value.sourceType===e.value.sourceType&&this.props.value.inputEditor===e.value.inputEditor||this.setState({displayUI:this.getInputEditor(this.props.value.inputEditor)})},t.prototype.render=function(){var e,t,r,n=this;if(!this.state.DatePicker)return null;var a=null,l=null===(t=null===(e=this.props.fieldObj)||void 0===e?void 0:e.format)||void 0===t?void 0:t.dateFormat,i=!1,u=!1,p=!1;if(this.state.displayUI){if(null===(r=this.props.value)||void 0===r?void 0:r.value){var c=this.props.value.value[0].value;"string"==typeof c?a=c:(a=new Date(c),i=!0)}"date"===this.state.displayUI?l?l.indexOf("Time")>0&&(l=l.split("24")[0].split("ShortTime")[0].split("LongTime")[0]):l=o.dateUtils.DATE_TIME_DEFAULT_FORMAT.date:"datetime"===this.state.displayUI&&(u=!0,l?l.indexOf("Time")<0&&(l=l+" "+o.dateUtils.DATE_TIME_DEFAULT_FORMAT.time):l=o.dateUtils.DATE_TIME_DEFAULT_FORMAT.dateTime,l.indexOf("LongTime")>=0&&(p=!0))}return o.React.createElement(this.state.DatePicker,{style:this.props.style||{width:s.getClauseInputEditorStyles(this.props.isSmallSize||this.props.runtime).inputEditorWidth},selectedDate:a,showTimeInput:u,isTimeLong:p,isUTCDate:i,format:l,runtime:this.props.runtime,supportVirtualDateList:!this.props.runtime,hasDoneButton:!0,onChange:function(e,t){return n.onChange(e,t)}})},t}(o.React.PureComponent);t._VIDateTimePicker=i;var u=i;t.default=u},499:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(3),l=r(56),i=r(140),u=r(500),p=function(e){function t(t){var r=e.call(this,t)||this;return r.i18nMessage=function(e){return r.props.intl.formatMessage({id:e,defaultMessage:s.defaultMessages[e]})},r.getCodedValues=function(){var e=null;r.props.clause.valueOptions.sourceType===o.ClauseSourceType.UserInput&&(e=l.getInputEditorListByOperatorAndSourceType(r.props.clause.operator,r.props.clause.valueOptions.sourceType,r.props.dataSource,r.props.clause.jimuFieldName).codedValues);return e},r.onValueOptsChange=function(e){var t=Object.assign({},r.props.clause,{valueOptions:e});r.props&&r.props.onChange(t,r.props.id)},r.state={},r}return a(t,e),t.prototype.render=function(){this.fieldObj=o.Immutable(this.props.dataSource.getSchema().fields[this.props.clause.jimuFieldName]);var e=this.i18nMessage(i.getCamelCase(this.props.clause.operator)),t=i.getClauseLabel(this.props.clause,this.fieldObj,e),r=this.props.clause,n=r.displayType,a=r.askForValueOptions,s=a&&a.hint;return o.jsx("div",{className:o.classNames("sql-expression-single",this.props.className?this.props.className:"")},n===o.ClauseDisplayType.UseAskForValue&&o.jsx("div",null,o.jsx("div",{className:a.display===o.ClauseLabelDisplay.Inline&&""!==a.label?"clause-inline":"clause-block"},""!==a.label&&o.jsx("div",{className:"sql-expression-label",title:t},t),o.jsx("div",{className:"sql-expression-input"},o.jsx(u.InputEditorRender,{onChange:this.onValueOptsChange,dataSource:this.props.dataSource,codedValues:this.getCodedValues(),valueOptions:this.props.clause.valueOptions,fieldObj:this.fieldObj,runtime:!0,sql:i.getCascadeSQL(this.props.expression,this.props.clause,this.props.id,this.props.dataSource)}))),s&&o.jsx("div",{className:"w-100 sql-expression-hint",title:s},s)),n===o.ClauseDisplayType.UseLabel&&o.jsx("div",{className:"w-100 sql-expression-displaylabel",title:t},t))},t}(o.React.PureComponent);t._SqlExprClauseRuntime=p;var c=o.themeUtils.withStyles(o.injectIntl(p),"SqlExpressionClauseRuntime");t.default=c},500:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(56),l=function(e){function t(t){var r=e.call(this,t)||this;return r._setStateForInputEditor=function(){r.setState({inputEditor:s.getInputEditor(r.props.valueOptions,r.props.fieldObj,r.props.onChange,r.props.dataSource,r.props.codedValues,r.props.runtime,r.props.sql,r.props.isSmallSize)})},r.state={inputEditor:null},r}return a(t,e),t.prototype.componentDidMount=function(){this._setStateForInputEditor()},t.prototype.componentDidUpdate=function(e,t){this.props.fieldObj===e.fieldObj&&this.props.valueOptions===e.valueOptions&&this.props.codedValues===e.codedValues&&this.props.sql===e.sql&&this.props.isSmallSize===e.isSmallSize||this._setStateForInputEditor()},t.prototype.render=function(){return o.React.createElement("div",{className:"w-100 h-100"},this.state.inputEditor)},t}(o.React.PureComponent);t._InputEditorRender=l,t.InputEditorRender=l},56:function(e,t,r){"use strict";var n,a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(64),l=r(811),i=r(812),u=r(813),p=r(814),c=r(815),d=r(498),f=r(816),h=r(817),y=r(818),m=r(819),v=((n={})[s.ClauseInputEditor.TextInput]=l.default,n[s.ClauseInputEditor.DoubleNumberSelector]=u.default,n[s.ClauseInputEditor.FieldSelector]=i.default,n[s.ClauseInputEditor.SimpleSelect]=p.default,n[s.ClauseInputEditor.UniquePillWrapSelector]=c.default,n[s.ClauseInputEditor.MultipleSelect]=p.default,n[s.ClauseInputEditor.MultiplePillWrapSelector]=c.default,n[s.ClauseInputEditor.DatePicker]=d.default,n[s.ClauseInputEditor.DateTimePicker]=d.default,n[s.ClauseInputEditor.DateRangeSelector]=f.default,n[s.ClauseInputEditor.DoubleDatePicker]=h.default,n[s.ClauseInputEditor.DoubleDateTimePicker]=h.default,n[s.ClauseInputEditor.NumberListSelector]=y.default,n[s.ClauseInputEditor.BlankSelector]=m.default,n);function O(e,t){e.getLayerDefinition();return e.getFieldCodedValueList(t)}function C(e,t,r,n){return{isValid:void 0===n||n,sourceType:e||o.ClauseSourceType.UserInput,inputEditor:t||s.ClauseInputEditor.TextInput,value:r||(t===s.ClauseInputEditor.NumberListSelector?[{value:null,label:o.dateUtils.TimeUnit.Day}]:null)}}function S(){return{type:o.ClauseType.Single,jimuFieldName:"",operator:null,valueOptions:C(null,null,null,!1),displayType:o.ClauseDisplayType.None,askForValueOptions:null,displayLabel:null}}function g(e,t,r,n){t=t||o.ClauseSourceType.UserInput;var a=s.ClauseRelationship[e],l=[],i=null;if(a){var u=a[t];l=u.normalInputEditors,u.codedValueInputEditors&&r&&n&&(i=O(r,n))&&i.length>0&&(l=u.codedValueInputEditors)}else l=[s.ClauseInputEditor.TextInput];return{inputEditorTypes:l,codedValues:i}}function I(e){var t=null;if("esriFieldTypeString"===e)t=o.JimuFieldType.String;else if("esriFieldTypeDate"===e)t=o.JimuFieldType.Date;else{["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(e)>=0&&(t=o.JimuFieldType.Number)}return t}t.getInputEditor=function(e,t,r,n,l,i,u,p){var c=v[e.inputEditor],d={value:e,fieldObj:t,dataSource:n,codedValues:l||null,runtime:i||!1,sql:u||null,isSmallSize:p},f=[s.ClauseInputEditor.MultipleSelect].indexOf(e.inputEditor)>=0;return o.React.createElement(c,a({},d,{isMultiple:f,onChange:r}))},t.getCodedValuesFromDs=O,t.getDefaultClauseValObj=C,t.getDefaultSingleClause=S,t.getDefaultClauseSet=function(){var e=S(),t=S();return{type:o.ClauseType.Set,logicalOperator:o.ClauseLogic.And,parts:o.Immutable([e,t])}},t.isCaseSensitiveSupportedByOperatorAndSourceType=function(e,t){var r=s.ClauseRelationship[e][t].supportCaseSensitive;return r||!1},t.isAskForValueSupportedByOperatorAndSourceType=function(e,t){var r=s.ClauseRelationship[e][t].supportAskForValue;return r||!1},t.getCodedValueInputEditorsByOperatorAndSourceType=function(e,t){var r=s.ClauseRelationship[e][t].codedValueInputEditors;return r||null},t.getClauseValObjByOperator=function(e,t,r){var n=o.ClauseSourceType.UserInput;return C(n,g(e,n,t,r)[0])},t.getDisplayTypes=function(e,t,r,n,a){var l={},i=null,u=null,p=s.ClauseInputEditor.TextInput,c=s.ClauseRelationship[r];if(c){for(var d in c)l[d]=[],u=u||d;Object.keys(l).map((function(s){var c;i&&(n=null);var d=g(r,s,n,a);if(l[s]=d.inputEditorTypes,i=i||d.codedValues,s===u){var f=[o.ClauseOperator.DateOperatorIsOn,o.ClauseOperator.DateOperatorIsNotOn,o.ClauseOperator.DateOperatorIsBefore,o.ClauseOperator.DateOperatorIsAfter,o.ClauseOperator.DateOperatorIsOnOrBefore,o.ClauseOperator.DateOperatorIsOnOrAfter];p=d.inputEditorTypes[0],s===o.ClauseSourceType.UserInput&&(null===(c=t.format)||void 0===c?void 0:c.dateFormat)&&t.format.dateFormat.indexOf("Time")>=0&&f.indexOf(r)>=0&&(p=d.inputEditorTypes[1])}e===o.SqlExpressionMode.Simple&&(l[s]=[s===u?p:d.inputEditorTypes[0]])}))}else u=o.ClauseSourceType.UserInput,l[u]=[p];return{displayTypes:l,codedValues:i,defaultSourceType:u,defaultInputEditorType:p}},t.getInputEditorListByOperatorAndSourceType=g,t.getJimuFieldTypeByEsriType=I,t.getOperatorsByEsriType=function(e,t){var r=I(e);return s.getOperatorsByShortType(r,t)}},61:function(e,t){e.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M1.521 2.307L4 4.677l2.479-2.37a.517.517 0 01.708 0 .464.464 0 010 .677l-2.833 2.71a.517.517 0 01-.708 0L.813 2.983a.464.464 0 010-.677.517.517 0 01.708 0z"></path><path d="M0 0h8v8H0z" fill="none"></path></svg>'},64:function(e,t,r){"use strict";var n,a,o,s,l,i,u,p,c,d,f,h,y,m,v,O,C,S,g,I,b,E,_,T,D,x,w,j,V,F,P,M,U,N,A,k,L;Object.defineProperty(t,"__esModule",{value:!0});var R,B=r(0);!function(e){e.Small="SMALL",e.Medium="MEDIUM",e.Large="LARGE"}(t.SqlExpressionSizeMode||(t.SqlExpressionSizeMode={})),function(e){e.DoubleNumberSelector="DOUBLE_NUMBER_SELECTOR",e.TextInput="TEXT_BOX",e.FieldSelector="FIELD_SELECTOR",e.SimpleSelect="SIMPLE_SELECT",e.UniquePillWrapSelector="UNIQUE_PILL_WRAP_SELECTOR",e.MultipleSelect="MULTIPLE_SELECT",e.MultiplePillWrapSelector="MULTIPLE_PILL_WRAP_SELECTOR",e.DatePicker="DATE_PICKER",e.DateTimePicker="DATE_TIME_PICKER",e.DateRangeSelector="DATE_RANGE_SELECTOR",e.DoubleDatePicker="DOUBLE_DATE_PICKER",e.DoubleDateTimePicker="DOUBLE_DATE_TIME_PICKER",e.NumberListSelector="NUMBER_LIST_SELECTOR",e.BlankSelector="BLANK_SELECTOR"}(R=t.ClauseInputEditor||(t.ClauseInputEditor={})),t.getClauseInputEditorStyles=function(e,t){void 0===t&&(t=!1);var r="calc(100% - 8px)",n={inputEditorWidth:"calc("+r+" * 0.44)",connectorWidth:"calc("+r+" * 0.12)",dropDownWidth:"calc("+r+" * 0.32)"};return e&&(t?(n.inputEditorWidth="calc(calc(100% - 4px) * 0.6)",n.dropDownWidth="calc(calc(100% - 4px) * 0.4)"):n.inputEditorWidth="100%"),n};var q=[R.FieldSelector],W=[R.SimpleSelect,R.UniquePillWrapSelector],z=[R.MultipleSelect,R.MultiplePillWrapSelector],H=[R.TextInput],Q=[R.TextInput],J=[R.DoubleNumberSelector];t.normalInputEditorsForValueAndDate=[R.DatePicker,R.DateTimePicker],t.normalInputEditorsForValueAndDoubleDate=[R.DoubleDatePicker,R.DoubleDateTimePicker];var G=[R.NumberListSelector],K=[R.SimpleSelect,R.UniquePillWrapSelector],Y=[R.BlankSelector];t.ClauseRelationship=((n={})[B.ClauseOperator.StringOperatorIs]=((a={})[B.ClauseSourceType.UserInput]={normalInputEditors:H,codedValueInputEditors:K,supportAskForValue:!0,supportCaseSensitive:!0},a[B.ClauseSourceType.Field]={normalInputEditors:q},a[B.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:W,codedValueInputEditors:K,supportAskForValue:!0,supportCaseSensitive:!0},a),n[B.ClauseOperator.StringOperatorIsNot]=((o={})[B.ClauseSourceType.UserInput]={normalInputEditors:H,codedValueInputEditors:K,supportAskForValue:!0,supportCaseSensitive:!0},o[B.ClauseSourceType.Field]={normalInputEditors:q},o[B.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:W,codedValueInputEditors:K,supportAskForValue:!0,supportCaseSensitive:!0},o),n[B.ClauseOperator.StringOperatorContains]=((s={})[B.ClauseSourceType.UserInput]={normalInputEditors:H,supportAskForValue:!0,supportCaseSensitive:!0},s),n[B.ClauseOperator.StringOperatorDoesNotContain]=((l={})[B.ClauseSourceType.UserInput]={normalInputEditors:H,supportAskForValue:!0,supportCaseSensitive:!0},l),n[B.ClauseOperator.StringOperatorStartsWith]=((i={})[B.ClauseSourceType.UserInput]={normalInputEditors:H,supportAskForValue:!0,supportCaseSensitive:!0},i),n[B.ClauseOperator.StringOperatorEndsWith]=((u={})[B.ClauseSourceType.UserInput]={normalInputEditors:H,supportAskForValue:!0,supportCaseSensitive:!0},u),n[B.ClauseOperator.StringOperatorIsAnyOf]=((p={})[B.ClauseSourceType.MultipleSelectFromUnique]={normalInputEditors:z,codedValueInputEditors:z,supportAskForValue:!0,supportCaseSensitive:!0},p),n[B.ClauseOperator.StringOperatorIsNoneOf]=((c={})[B.ClauseSourceType.MultipleSelectFromUnique]={normalInputEditors:z,codedValueInputEditors:z,supportAskForValue:!0,supportCaseSensitive:!0},c),n[B.ClauseOperator.StringOperatorIsBlank]=((d={})[B.ClauseSourceType.UserInput]={normalInputEditors:Y,supportCaseSensitive:!0},d),n[B.ClauseOperator.StringOperatorIsNotBlank]=((f={})[B.ClauseSourceType.UserInput]={normalInputEditors:Y,supportCaseSensitive:!0},f),n[B.ClauseOperator.NumberOperatorIs]=((h={})[B.ClauseSourceType.UserInput]={normalInputEditors:Q,codedValueInputEditors:K,supportAskForValue:!0},h[B.ClauseSourceType.Field]={normalInputEditors:q},h[B.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:W,codedValueInputEditors:K,supportAskForValue:!0},h),n[B.ClauseOperator.NumberOperatorIsNot]=((y={})[B.ClauseSourceType.UserInput]={normalInputEditors:Q,codedValueInputEditors:K,supportAskForValue:!0},y[B.ClauseSourceType.Field]={normalInputEditors:q},y[B.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:W,codedValueInputEditors:K,supportAskForValue:!0},y),n[B.ClauseOperator.NumberOperatorIsAtLeast]=((m={})[B.ClauseSourceType.UserInput]={normalInputEditors:Q,supportAskForValue:!0},m[B.ClauseSourceType.Field]={normalInputEditors:q},m[B.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:W,supportAskForValue:!0},m),n[B.ClauseOperator.NumberOperatorIsAtMost]=((v={})[B.ClauseSourceType.UserInput]={normalInputEditors:Q,supportAskForValue:!0},v[B.ClauseSourceType.Field]={normalInputEditors:q},v[B.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:W,supportAskForValue:!0},v),n[B.ClauseOperator.NumberOperatorIsLessThan]=((O={})[B.ClauseSourceType.UserInput]={normalInputEditors:Q,supportAskForValue:!0},O[B.ClauseSourceType.Field]={normalInputEditors:q},O[B.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:W,supportAskForValue:!0},O),n[B.ClauseOperator.NumberOperatorIsGreaterThan]=((C={})[B.ClauseSourceType.UserInput]={normalInputEditors:Q,supportAskForValue:!0},C[B.ClauseSourceType.Field]={normalInputEditors:q},C[B.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:W,supportAskForValue:!0},C),n[B.ClauseOperator.NumberOperatorIsBetween]=((S={})[B.ClauseSourceType.UserInput]={normalInputEditors:J,supportAskForValue:!0},S),n[B.ClauseOperator.NumberOperatorIsNotBetween]=((g={})[B.ClauseSourceType.UserInput]={normalInputEditors:J,supportAskForValue:!0},g),n[B.ClauseOperator.NumberOperatorIsAnyOf]=((I={})[B.ClauseSourceType.MultipleSelectFromUnique]={normalInputEditors:z,codedValueInputEditors:z,supportAskForValue:!0},I),n[B.ClauseOperator.NumberOperatorIsNoneOf]=((b={})[B.ClauseSourceType.MultipleSelectFromUnique]={normalInputEditors:z,codedValueInputEditors:z,supportAskForValue:!0},b),n[B.ClauseOperator.NumberOperatorIsBlank]=((E={})[B.ClauseSourceType.UserInput]={normalInputEditors:Y},E),n[B.ClauseOperator.NumberOperatorIsNotBlank]=((_={})[B.ClauseSourceType.UserInput]={normalInputEditors:Y},_),n[B.ClauseOperator.DateOperatorIsOn]=((T={})[B.ClauseSourceType.UserInput]={normalInputEditors:t.normalInputEditorsForValueAndDate,supportAskForValue:!0},T[B.ClauseSourceType.Field]={normalInputEditors:q},T[B.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:W,codedValueInputEditors:K,supportAskForValue:!0},T),n[B.ClauseOperator.DateOperatorIsNotOn]=((D={})[B.ClauseSourceType.UserInput]={normalInputEditors:t.normalInputEditorsForValueAndDate,supportAskForValue:!0},D[B.ClauseSourceType.Field]={normalInputEditors:q},D[B.ClauseSourceType.SingleSelectFromUnique]={normalInputEditors:W,codedValueInputEditors:K,supportAskForValue:!0},D),n[B.ClauseOperator.DateOperatorIsIn]=((x={})[B.ClauseSourceType.UserInput]={normalInputEditors:[R.DateRangeSelector],supportAskForValue:!0},x),n[B.ClauseOperator.DateOperatorIsNotIn]=((w={})[B.ClauseSourceType.UserInput]={normalInputEditors:[R.DateRangeSelector],supportAskForValue:!0},w),n[B.ClauseOperator.DateOperatorIsBefore]=((j={})[B.ClauseSourceType.UserInput]={normalInputEditors:t.normalInputEditorsForValueAndDate,supportAskForValue:!0},j[B.ClauseSourceType.Field]={normalInputEditors:q},j),n[B.ClauseOperator.DateOperatorIsAfter]=((V={})[B.ClauseSourceType.UserInput]={normalInputEditors:t.normalInputEditorsForValueAndDate,supportAskForValue:!0},V[B.ClauseSourceType.Field]={normalInputEditors:q},V),n[B.ClauseOperator.DateOperatorIsOnOrBefore]=((F={})[B.ClauseSourceType.UserInput]={normalInputEditors:t.normalInputEditorsForValueAndDate,supportAskForValue:!0},F[B.ClauseSourceType.Field]={normalInputEditors:q},F),n[B.ClauseOperator.DateOperatorIsOnOrAfter]=((P={})[B.ClauseSourceType.UserInput]={normalInputEditors:t.normalInputEditorsForValueAndDate,supportAskForValue:!0},P[B.ClauseSourceType.Field]={normalInputEditors:q},P),n[B.ClauseOperator.DateOperatorIsInTheLast]=((M={})[B.ClauseSourceType.UserInput]={normalInputEditors:G,supportAskForValue:!0},M),n[B.ClauseOperator.DateOperatorIsNotInTheLast]=((U={})[B.ClauseSourceType.UserInput]={normalInputEditors:G,supportAskForValue:!0},U),n[B.ClauseOperator.DateOperatorIsBetween]=((N={})[B.ClauseSourceType.UserInput]={normalInputEditors:t.normalInputEditorsForValueAndDoubleDate,supportAskForValue:!0},N),n[B.ClauseOperator.DateOperatorIsNotBetween]=((A={})[B.ClauseSourceType.UserInput]={normalInputEditors:t.normalInputEditorsForValueAndDoubleDate,supportAskForValue:!0},A),n[B.ClauseOperator.DateOperatorIsBlank]=((k={})[B.ClauseSourceType.UserInput]={normalInputEditors:Y},k),n[B.ClauseOperator.DateOperatorIsNotBlank]=((L={})[B.ClauseSourceType.UserInput]={normalInputEditors:Y},L),n),t.getOperatorsByShortType=function(e,t){var r=[];return"STRING"===e?r=[B.ClauseOperator.StringOperatorIs,B.ClauseOperator.StringOperatorIsNot,B.ClauseOperator.StringOperatorStartsWith,B.ClauseOperator.StringOperatorEndsWith,B.ClauseOperator.StringOperatorContains,B.ClauseOperator.StringOperatorDoesNotContain,B.ClauseOperator.StringOperatorIsAnyOf,B.ClauseOperator.StringOperatorIsNoneOf,B.ClauseOperator.StringOperatorIsBlank,B.ClauseOperator.StringOperatorIsNotBlank]:"NUMBER"===e?r=[B.ClauseOperator.NumberOperatorIs,B.ClauseOperator.NumberOperatorIsNot,B.ClauseOperator.NumberOperatorIsAtLeast,B.ClauseOperator.NumberOperatorIsAtMost,B.ClauseOperator.NumberOperatorIsLessThan,B.ClauseOperator.NumberOperatorIsGreaterThan,B.ClauseOperator.NumberOperatorIsBetween,B.ClauseOperator.NumberOperatorIsNotBetween,B.ClauseOperator.NumberOperatorIsAnyOf,B.ClauseOperator.NumberOperatorIsNoneOf,B.ClauseOperator.NumberOperatorIsBlank,B.ClauseOperator.NumberOperatorIsNotBlank]:"DATE"===e&&(r=[B.ClauseOperator.DateOperatorIsOn,B.ClauseOperator.DateOperatorIsNotOn,B.ClauseOperator.DateOperatorIsIn,B.ClauseOperator.DateOperatorIsNotIn,B.ClauseOperator.DateOperatorIsBefore,B.ClauseOperator.DateOperatorIsAfter,B.ClauseOperator.DateOperatorIsOnOrBefore,B.ClauseOperator.DateOperatorIsOnOrAfter,B.ClauseOperator.DateOperatorIsBetween,B.ClauseOperator.DateOperatorIsNotBetween,B.ClauseOperator.DateOperatorIsBlank,B.ClauseOperator.DateOperatorIsNotBlank],t&&r.splice(8,0,B.ClauseOperator.DateOperatorIsInTheLast,B.ClauseOperator.DateOperatorIsNotInTheLast)),r}},806:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(807);r(0).ThemeManager.getInstance().registerJimuThemeStyleModule("jimu-ui/basic/sql-expression-runtime/",{componentStyles:n});var a=r(64);t.SqlExpressionSizeMode=a.SqlExpressionSizeMode,t.ClauseInputEditor=a.ClauseInputEditor,t.ClauseRelationship=a.ClauseRelationship,t.getOperatorsByShortType=a.getOperatorsByShortType;var o=r(140);t.getClauseArrayByChange=o.getClauseArrayByChange,t.getCamelCase=o.getCamelCase,t.getJimuFieldNamesBySqlExpression=o.getJimuFieldNamesBySqlExpression,t.isSqlExpressionValid=o.isSqlExpressionValid,t.getClauseLabel=o.getClauseLabel,t.getClauseDefaultLabel=o.getClauseDefaultLabel,t.updateSQLExpressionByVersion=o.updateSQLExpressionByVersion;var s=r(56);t.getInputEditor=s.getInputEditor,t.getCodedValuesFromDs=s.getCodedValuesFromDs,t.getDefaultClauseValObj=s.getDefaultClauseValObj,t.getDefaultSingleClause=s.getDefaultSingleClause,t.getDefaultClauseSet=s.getDefaultClauseSet,t.isCaseSensitiveSupportedByOperatorAndSourceType=s.isCaseSensitiveSupportedByOperatorAndSourceType,t.isAskForValueSupportedByOperatorAndSourceType=s.isAskForValueSupportedByOperatorAndSourceType,t.getCodedValueInputEditorsByOperatorAndSourceType=s.getCodedValueInputEditorsByOperatorAndSourceType,t.getClauseValObjByOperator=s.getClauseValObjByOperator,t.getDisplayTypes=s.getDisplayTypes,t.getInputEditorListByOperatorAndSourceType=s.getInputEditorListByOperatorAndSourceType,t.getJimuFieldTypeByEsriType=s.getJimuFieldTypeByEsriType,t.getOperatorsByEsriType=s.getOperatorsByEsriType;var l=r(820);t.SqlExpressionRuntime=l.default;var i=r(500);t.InputEditorRender=i.InputEditorRender},807:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(808);t.SqlExpressionClauseRuntime=n.sqlExpressionClauseRuntimeStyles;var a=r(809);t.VIDoubleDateTimePicker=a.doubleInputSelectorStyles,t.VIDoubleNumberSelector=a.doubleInputSelectorStyles;var o=r(810);t.VIPillSelector=o.pillSelectorStyles},808:function(e,t,r){"use strict";var n=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,o=r(0);t.sqlExpressionClauseRuntimeStyles=function(e){var t=e.theme;return o.css(a||(a=n(["\n    margin: 10px 0;\n\n    .sql-expression-label, .sql-expression-displaylabel{\n      width: 100%;\n      font-size: ",";\n      color: ",";\n    }\n    .sql-expression-input{\n      width: 100%;\n      \n    }\n    .sql-expression-hint{\n      margin-top: 4px;\n      font-size: ",";\n      color: ",";\n      font-style: italic;\n    }\n\n    .clause-inline{\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n\n      .sql-expression-label{\n        width: calc(40% - 8px);\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      .sql-expression-label, .sql-expression-displaylabel{\n        line-height: 32px;\n      }\n      .sql-expression-input{\n        width: calc(60% - 8px);\n      }\n    }\n\n  "],["\n    margin: 10px 0;\n\n    .sql-expression-label, .sql-expression-displaylabel{\n      width: 100%;\n      font-size: ",";\n      color: ",";\n    }\n    .sql-expression-input{\n      width: 100%;\n      \n    }\n    .sql-expression-hint{\n      margin-top: 4px;\n      font-size: ",";\n      color: ",";\n      font-style: italic;\n    }\n\n    .clause-inline{\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n\n      .sql-expression-label{\n        width: calc(40% - 8px);\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      .sql-expression-label, .sql-expression-displaylabel{\n        line-height: 32px;\n      }\n      .sql-expression-input{\n        width: calc(60% - 8px);\n      }\n    }\n\n  "])),o.polished.rem(13),t.colors.black,o.polished.rem(12),t.colors.palette.dark[300])}},809:function(e,t,r){"use strict";var n=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,o=r(0);t.doubleInputSelectorStyles=function(e){return o.css(a||(a=n(["\n    justify-content: space-between;\n    .double-input-connector{\n      margin-top: 0.15rem;\n      margin-bottom: 0.15rem;\n      text-align: center;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  "],["\n    justify-content: space-between;\n    .double-input-connector{\n      margin-top: 0.15rem;\n      margin-bottom: 0.15rem;\n      text-align: center;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  "])))}},810:function(e,t,r){"use strict";var n=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,o=r(0);t.pillSelectorStyles=function(e){return o.css(a||(a=n(["\n    /** setting */\n    .pill-selector-button{\n      justify-content: space-between;\n      display: flex;\n      align-items: center;\n\n      .pill-display-label{\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        width: calc(100% - 20px);\n      }\n    }\n\n    .pill-selector-popper{\n      padding: 12px;\n      max-width: 320px;\n      max-height: 320px;\n      overflow-y: auto;\n\n      .jimu-btn{\n        margin: 4px;\n        max-width: 100%;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n    }\n\n    /** runtime */\n    .pill-runtime-container{\n      /* width: calc(100% + 10px); */\n      width: 100%;\n      .pill-btn-container{\n        display: flex;\n        flex-wrap: wrap;\n        margin-left: -5px;\n        margin-top: -5px;\n\n        .pill-btn{\n          margin: 5px;\n          max-width: calc(100% - 10px);\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          overflow: hidden;\n          /* &:first-of-type{\n            margin-left: 0;\n          }\n          &:last-of-type{\n            margin-right: 0;\n          } */\n        }\n      }\n      &.block-pills .pill-btn{\n        display: block;\n        margin-top: 10px;\n      }\n    }\n  "],["\n    /** setting */\n    .pill-selector-button{\n      justify-content: space-between;\n      display: flex;\n      align-items: center;\n\n      .pill-display-label{\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        width: calc(100% - 20px);\n      }\n    }\n\n    .pill-selector-popper{\n      padding: 12px;\n      max-width: 320px;\n      max-height: 320px;\n      overflow-y: auto;\n\n      .jimu-btn{\n        margin: 4px;\n        max-width: 100%;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n    }\n\n    /** runtime */\n    .pill-runtime-container{\n      /* width: calc(100% + 10px); */\n      width: 100%;\n      .pill-btn-container{\n        display: flex;\n        flex-wrap: wrap;\n        margin-left: -5px;\n        margin-top: -5px;\n\n        .pill-btn{\n          margin: 5px;\n          max-width: calc(100% - 10px);\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          overflow: hidden;\n          /* &:first-of-type{\n            margin-left: 0;\n          }\n          &:last-of-type{\n            margin-right: 0;\n          } */\n        }\n      }\n      &.block-pills .pill-btn{\n        display: block;\n        margin-top: 10px;\n      }\n    }\n  "])))}},811:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(3),l=r(56),i=r(64),u=function(e){function t(t){var r=e.call(this,t)||this;return r._setStateForDisplayUI=function(){var e=r.props.fieldObj?r.props.fieldObj.type:null;r.setState({displayUI:r.getDisplayUI(e)})},r.getDisplayUI=function(e){var t="";switch(e){case o.JimuFieldType.Number:t="number";break;case o.JimuFieldType.String:case null:t="text"}return t},r.onNumberChange=function(e){var t=parseFloat(e.target.value),n=t+""!="NaN"?t:null;r.onChange(n)},r.onTextChange=function(e){var t=e.target.value;r.onChange(t+""!=""?t:null)},r.onChange=function(e){if(r.props.fieldObj){var t=null!==e?[{value:e,label:e+""}]:null,n=l.getDefaultClauseValObj(r.props.value.sourceType,r.props.value.inputEditor,t);r.props&&r.props.onChange(n)}},r.state={displayUI:null},r}return a(t,e),t.prototype.componentDidMount=function(){var e=this.props.fieldObj?this.props.fieldObj.type:null;this.setState({displayUI:this.getDisplayUI(e)})},t.prototype.componentDidUpdate=function(e,t){this.props.fieldObj===e.fieldObj&&this.props.value.sourceType===e.value.sourceType&&this.props.value.inputEditor===e.value.inputEditor||this._setStateForDisplayUI()},t.prototype.render=function(){var e,t=this.props.runtime?void 0:"sm",r=i.getClauseInputEditorStyles(this.props.isSmallSize||this.props.runtime).inputEditorWidth,n=(null===(e=this.props.value)||void 0===e?void 0:e.value)?this.props.value.value[0].value:"";return"number"===this.state.displayUI?o.React.createElement(s.NumericInput,{size:t,style:{width:r},showHandlers:!1,value:n,onBlur:this.onNumberChange,onPressEnter:this.onNumberChange}):o.React.createElement(s.TextInput,{size:t,style:{width:r},type:"text",value:n,onBlur:this.onTextChange,onKeyUp:this.onTextChange})},t}(o.React.PureComponent);t._VITextBox=u;var p=u;t.default=p},812:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(56),l=r(64),i=function(e){function t(t){var r=e.call(this,t)||this;return r.getSelectedFields=function(){var e=r.props.value.value;return e?o.Immutable([e[0].value]):null},r.onChange=function(e){var t=e[0],n={value:t.jimuName,label:t.alias?t.alias:t.name},a=s.getDefaultClauseValObj(r.props.value.sourceType,r.props.value.inputEditor,[n]);r.props&&r.props.onChange(a)},r.state={FieldSelector:null,type:r.props.fieldObj.type},r}return a(t,e),t.prototype.componentDidMount=function(){var e=this;this.__unmount=!1,o.moduleLoader.loadModule("jimu-ui/advanced/data-source-selector").then((function(t){e.__unmount||e.setState({FieldSelector:t.FieldSelector})}))},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.componentDidUpdate=function(e,t){this.props.fieldObj!==e.fieldObj&&this.setState({type:this.props.fieldObj.type})},t.prototype.render=function(){return this.state.FieldSelector?o.React.createElement("div",{style:{width:l.getClauseInputEditorStyles(this.props.isSmallSize).inputEditorWidth}},o.React.createElement(this.state.FieldSelector,{types:o.Immutable([this.state.type]),dataSources:[this.props.dataSource],onChange:this.onChange,hiddenFields:o.Immutable([this.props.fieldObj.jimuName]),selectedFields:this.getSelectedFields(),isDataSourceDropDownHidden:!0,isSearchInputHidden:!0,useDropdown:!0,dropdownProps:{size:this.props.runtime?void 0:"sm"}})):null},t}(o.React.PureComponent);t._VIFieldSelector=i;var u=i;t.default=u},813:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(56),l=r(3),i=r(64),u=function(e){function t(t){var r=e.call(this,t)||this;return r.i18nMessage=function(e){return r.props.intl.formatMessage({id:e,defaultMessage:l.defaultMessages[e]})},r.onValue1Change=function(e){r.value1=parseFloat(e.target.value),r.onChange()},r.onValue2Change=function(e){r.value2=parseFloat(e.target.value),r.onChange()},r.onChange=function(){var e=[],t=null!==r.value1&&r.value1+""!="NaN"?{value:r.value1,label:r.value1+""}:null,n=null!==r.value2&&r.value2+""!="NaN"?{value:r.value2,label:r.value2+""}:null;e.push(t),e.push(n);var a=s.getDefaultClauseValObj(r.props.value.sourceType,r.props.value.inputEditor,e);r.props&&r.props.onChange(a)},r}return a(t,e),t.prototype.render=function(){var e,t,r=this.props.runtime?void 0:"sm";this.value1=(null===(e=this.props.value)||void 0===e?void 0:e.value)&&this.props.value.value[0]?this.props.value.value[0].value:null,this.value2=(null===(t=this.props.value)||void 0===t?void 0:t.value)&&this.props.value.value[1]?this.props.value.value[1].value:null;var n=i.getClauseInputEditorStyles(!1);return o.React.createElement("div",{className:o.classNames(this.props.className,"double-number-picker d-flex")},o.React.createElement(l.NumericInput,{size:r,style:{width:n.inputEditorWidth},value:this.value1,showHandlers:!1,onBlur:this.onValue1Change,onPressEnter:this.onValue1Change}),o.React.createElement("div",{className:"double-input-connector",style:{width:n.connectorWidth}},this.i18nMessage("andLowerCase")),o.React.createElement(l.NumericInput,{size:r,style:{width:n.inputEditorWidth},value:this.value2,showHandlers:!1,onBlur:this.onValue2Change,onPressEnter:this.onValue2Change}))},t}(o.React.PureComponent);t._VIDoubleNumberSelector=u;var p=o.themeUtils.withStyles(o.injectIntl(u),"VIDoubleNumberSelector");t.default=p},814:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var l=r(0),i=r(56),u=r(3),p=r(64),c=function(e){function t(t){var r=e.call(this,t)||this;return r.onValueChange=function(e){var t=i.getDefaultClauseValObj(r.props.value.sourceType,r.props.value.inputEditor,e);r.props&&r.props.onChange(t)},r.state={},r}return a(t,e),t.prototype.render=function(){var e=this.props.value&&this.props.value.value?this.props.value.value:l.Immutable([]),t=this.props,r=(t.value,t.fieldObj,s(t,["value","fieldObj"]));return l.React.createElement("div",{style:{width:p.getClauseInputEditorStyles(this.props.isSmallSize||this.props.runtime).inputEditorWidth}},l.React.createElement(u.AdvancedSelect,o({},r,{field:this.props.fieldObj,values:e,isMultiple:this.props.isMultiple,fluid:!0,size:this.props.runtime?void 0:"sm",onChange:this.onValueChange})))},t}(l.React.PureComponent);t._VIAdvancedSelect=c;var d=c;t.default=d},815:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(3),l=r(56),i=r(64),u=function(e){function t(t){var r=e.call(this,t)||this;return r.isMultiple=function(){return r.props.value.sourceType===o.ClauseSourceType.MultipleSelectFromUnique},r.i18nMessage=function(e,t){return r.props.intl.formatMessage({id:e,defaultMessage:s.defaultMessages[e]},t)},r.updateList=function(e){void 0===e&&(e=r.props.fieldObj),r._isMounted&&!r.props.codedValues&&e&&o.dataSourceUtils.queryValueLabelsByFieldAndPageSize(e,r.dataSource,100,r.props.intl,r.props.sql).then((function(e){r._isMounted&&r.setState({list:e})}))},r.getDisplayLabel=function(e){var t=e.value||[],n=t.length;return r.state.isMultiple?r.i18nMessage("numSelected",{number:n}):n?t[0].label:r.i18nMessage("allTag")},r.onTogglePopper=function(){setTimeout((function(){return r.setState({isOpen:!r.state.isOpen})}),100)},r.isPillActive=function(e){var t;return!!((null===(t=r.props.value)||void 0===t?void 0:t.value)?r.props.value.value:[]).filter((function(t){return t.value===e})).length},r.onPillClick=function(e,t){var n,a=t.target.className.indexOf("active")<0;if(r.state.isMultiple||a){var o=a?[e]:[];r.state.isMultiple?null===(n=r.props.value.value)||void 0===n||n.map((function(t){(a||!a&&e.value!==t.value)&&o.push({value:t.value,label:t.label})})):(r.setState({isOpen:!1}),o.length&&o[0].value===r.emptyPillLabel&&(o=[])),o=o.length?o:null;var s=l.getDefaultClauseValObj(r.props.value.sourceType,r.props.value.inputEditor,o);r.props&&r.props.onChange(s)}},r.onDisplayChange=function(e){var t=l.getDefaultClauseValObj(r.props.value.sourceType,e,r.props.value.value);r.props&&r.props.onChange(t)},r.getPills=function(e){var t=r.i18nMessage("allTag");return o.React.createElement("div",{className:"pill-btn-container"},!r.state.isMultiple&&o.React.createElement(s.Button,{className:"pill-btn",size:r.props.runtime?void 0:"sm",value:r.emptyPillLabel,active:null===r.props.value.value,onClick:function(e){return r.onPillClick({value:r.emptyPillLabel,label:t},e)}},t),e.map((function(e,t){if(null!==e.value)return o.React.createElement(s.Button,{className:"pill-btn",size:r.props.runtime?void 0:"sm",key:t,value:e.value,active:r.isPillActive(e.value),onClick:function(t){return r.onPillClick(e,t)}},e.label)})))},r.dsManager=o.DataSourceManager.getInstance(),r.state={list:[],isMultiple:r.isMultiple(),isOpen:!1},r._isMounted=!1,r.emptyPillLabel="-empty-",r}return a(t,e),t.prototype.componentDidMount=function(){this._isMounted=!0,this.dataSource=this.dsManager.createLocalDataSource(this.props.dataSource,"pill_"+Math.ceil(1e5*Math.random())),this.updateList()},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this.dsManager.destroyDataSource(this.dataSource.id)},t.prototype.componentDidUpdate=function(e){this.props.fieldObj===e.fieldObj&&this.props.codedValues===e.codedValues&&this.props.sql===e.sql||this.updateList()},t.prototype.render=function(){var e=this,t=this.props,n=t.className,a=t.codedValues,l=t.value,u=t.runtime,p=this.getDisplayLabel(l),c=a||this.state.list;return c.length>20&&(c=c.slice(0,20)),o.React.createElement("div",{className:o.classNames(n,"h-100")},u?o.React.createElement("div",{className:"pill-runtime-container"},this.getPills(c)):o.React.createElement("div",{className:"h-100 d-flex"},o.React.createElement(s.Button,{size:"sm",className:"pill-selector-button h-100",type:"default",ref:function(t){return e.pillButton=t},title:p,style:{width:i.getClauseInputEditorStyles(this.props.isSmallSize||u).inputEditorWidth,justifyContent:this.state.isMultiple||null!==l.value?"space-between":"flex-end"},onClick:this.onTogglePopper},o.React.createElement("div",{className:"pill-display-label"},p),o.React.createElement(s.Icon,{icon:r(61),size:"8"})),o.React.createElement(s.Popper,{open:this.state.isOpen,toggle:this.onTogglePopper,className:n,showArrow:!0,reference:this.pillButton},o.React.createElement("div",{className:"pill-selector-popper"},o.React.createElement("div",{className:"pill-setting-container"},this.getPills(c))))))},t}(o.React.PureComponent);t._VIPillSelector=u;var p=o.themeUtils.withStyles(o.injectIntl(u),"VIPillSelector");t.default=p},816:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(3),l=r(56),i=r(140),u=r(64),p=[o.dateUtils.VirtualDateType.ThisWeek,o.dateUtils.VirtualDateType.ThisMonth,o.dateUtils.VirtualDateType.ThisQuarter,o.dateUtils.VirtualDateType.ThisYear],c=function(e){function t(t){var r=e.call(this,t)||this;return r.onValueChange=function(e,t){var n=e.target.value,a=null;""!==n&&(a=[{value:n,label:t.props.label}]);var o=l.getDefaultClauseValObj(r.props.value.sourceType,r.props.value.inputEditor,a);r.props&&r.props.onChange(o)},r.stopPropagation=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},r.state={},r}return a(t,e),t.prototype.render=function(){var e=this,t=this.props.value&&this.props.value.value?this.props.value.value[0].value:"";return o.React.createElement(s.Select,{size:this.props.runtime?void 0:"sm",style:{width:u.getClauseInputEditorStyles(this.props.isSmallSize||this.props.runtime).inputEditorWidth},value:t,onChange:this.onValueChange,menuProps:{onClick:this.stopPropagation}},o.React.createElement("option",{key:0,value:"",label:""}," "),p.map((function(t,r){var n=i.getCamelCase(t),a=e.props.intl.formatMessage({id:n,defaultMessage:s.defaultMessages[n]});return o.React.createElement("option",{key:r,value:t,label:a},a)})))},t}(o.React.PureComponent);t._VIDateRangeSelector=c;var d=o.injectIntl(c);t.default=d},817:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(56),l=r(3),i=r(498),u=r(64),p=function(e){function t(t){var r=e.call(this,t)||this;return r.i18nMessage=function(e){return r.props.intl.formatMessage({id:e,defaultMessage:l.defaultMessages[e]})},r.onChange=function(){var e=(r.value1.value||[null]).concat(r.value2.value||[null]),t=s.getDefaultClauseValObj(r.props.value.sourceType,r.props.value.inputEditor,e);r.props&&r.props.onChange(t)},r}return a(t,e),t.prototype.render=function(){var e=this,t=this.props.value,r=(null==t?void 0:t.value)&&t.value[0]?[t.value[0]]:null,n=(null==t?void 0:t.value)&&t.value[1]?[t.value[1]]:null;this.value1=s.getDefaultClauseValObj(t.sourceType,t.inputEditor,r),this.value2=s.getDefaultClauseValObj(t.sourceType,t.inputEditor,n);var a=u.getClauseInputEditorStyles(!1);return o.React.createElement("div",{className:o.classNames(this.props.className,"double-datetime-picker d-flex")},o.React.createElement(i.default,{style:{width:a.inputEditorWidth},value:this.value1,fieldObj:this.props.fieldObj,runtime:this.props.runtime,onChange:function(t){e.value1=t,e.onChange()}}),o.React.createElement("div",{className:"double-input-connector",style:{width:a.connectorWidth}},this.i18nMessage("andLowerCase")),o.React.createElement(i.default,{style:{width:a.inputEditorWidth},value:this.value2,fieldObj:this.props.fieldObj,runtime:this.props.runtime,onChange:function(t){e.value2=t,e.onChange()}}))},t}(o.React.PureComponent);t._VIDoubleDateTimePicker=p;var c=o.themeUtils.withStyles(o.injectIntl(p),"VIDoubleDateTimePicker");t.default=c},818:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(3),l=r(56),i=r(140),u=r(64),p=[o.dateUtils.TimeUnit.Minute,o.dateUtils.TimeUnit.Hour,o.dateUtils.TimeUnit.Day,o.dateUtils.TimeUnit.Week,o.dateUtils.TimeUnit.Month,o.dateUtils.TimeUnit.Year],c=function(e){function t(t){var r=e.call(this,t)||this;return r.i18nMessage=function(e){return r.props.intl.formatMessage({id:e,defaultMessage:s.defaultMessages[e]})},r.onUnitSelect=function(e){e!==r.unit&&(r.unit=e,r.onChange())},r.onChange=function(){var e=[{value:r.value,label:r.unit}],t=l.getDefaultClauseValObj(r.props.value.sourceType,r.props.value.inputEditor,e);r.props&&r.props.onChange(t)},r.toggle=function(){r.setState({isOpen:!r.state.isOpen})},r.state={isOpen:!1},r}return a(t,e),t.prototype.render=function(){var e=this,t=this.props.value.value[0];this.value=t.value?t.value:null,this.unit=t.label;var n=this.i18nMessage(i.getCamelCase(this.unit)),a=u.getClauseInputEditorStyles(this.props.isSmallSize||this.props.runtime,!0);return o.jsx("div",{className:"d-flex number-list-selector",style:{justifyContent:this.props.runtime?"space-between":"flex-start"}},o.jsx(s.NumericInput,{style:{width:a.inputEditorWidth},placeholder:this.i18nMessage("amount"),showHandlers:!1,value:this.value,onChange:function(t){e.value=t,e.onChange()},size:this.props.runtime?void 0:"sm"}),o.jsx(s.Dropdown,{className:"ml-1",style:{width:a.dropDownWidth},isOpen:this.state.isOpen,toggle:this.toggle,activeIcon:!0},o.jsx(s.DropdownButton,{type:"default",title:n,onClick:this.toggle,size:this.props.runtime?void 0:"sm",arrow:o.jsx(s.Icon,{icon:r(61),size:"8"})},n),o.jsx(s.DropdownMenu,{showArrow:!0},o.jsx(s.DropdownItem,{header:!0},this.i18nMessage("selectUnit")),o.jsx(s.DropdownItem,{divider:!0}),p.map((function(t,r){return o.jsx(s.DropdownItem,{key:r,onClick:function(){e.onUnitSelect(t)},active:e.unit===t},e.i18nMessage(i.getCamelCase(t)))})))))},t}(o.React.PureComponent);t._NumberListSelector=c;var d=o.injectIntl(c);t.default=d},819:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.render=function(){return o.React.createElement("div",null)},t}(o.React.PureComponent);t._VIBlankSelector=s;var l=s;t.default=l},820:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(499),l=r(3),i=r(140),u=r(821),p=function(e){function t(t){var r=e.call(this,t)||this;r.i18nMessage=function(e){return r.props.intl.formatMessage({id:e,defaultMessage:l.defaultMessages[e]})},r.onChange=function(e,t){var n=i.getClauseArrayByChange(r.props.expression.parts,e,t),a=o.Immutable({sql:r.props.expression.sql,displaySQL:r.props.expression.displaySQL,logicalOperator:r.props.expression.logicalOperator,parts:n.asMutable({deep:!0})}),s=o.dataSourceUtils.getArcGISSQL(a,r.props.dataSource);a=a.set("sql",s.sql).set("displaySQL",s.displaySQL),r.props.onChange&&r.props.onChange(a)};var n=r.props.dataSource;return n&&(r.isHosted=o.dataSourceUtils.isHostedService(n.getDataSourceJson().url||n.layer.url)),r.state={},r}return a(t,e),t.prototype.render=function(){var e=this;return o.jsx("div",{className:this.props.className?this.props.className:""},o.jsx(l.QueryScopeContext.Provider,{value:{scope:this.props.queryScope||o.QueryScope.InRuntimeView,widgetId:this.props.widgetId}},o.jsx("div",{style:this.props.style,className:"sql-expression-builder"},this.props.expression?o.jsx("div",{className:"sql-expression-container"},0===this.props.expression.parts.length?o.jsx("div",{className:"no-data-tip"},this.i18nMessage("noClauseTip")):this.props.expression.parts.map((function(t,r){return t.type===o.ClauseType.Single?(t=t).displayLabel!=o.ClauseDisplayType.None&&o.jsx(s.default,{key:r,id:"clause_"+r,expression:e.props.expression,clause:t,isHosted:e.isHosted,dataSource:e.props.dataSource,onChange:e.onChange}):o.jsx(u.default,{key:r,id:"clauseset_"+r,expression:e.props.expression,clauseSet:t,isHosted:e.isHosted,dataSource:e.props.dataSource,onChange:e.onChange})}))):o.jsx("div",{className:"no-data-tip"},this.i18nMessage("noAddedDataSourceCanBeUsed")))))},t}(o.React.PureComponent);t.SqlExpressionRuntime=o.themeUtils.withStyles(o.injectIntl(p),"SqlExpressionRuntime"),t.default=t.SqlExpressionRuntime},821:function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(3),l=r(140),i=r(499),u=function(e){function t(t){var r=e.call(this,t)||this;return r.i18nMessage=function(e){return r.props.intl.formatMessage({id:e,defaultMessage:s.defaultMessages[e]})},r.onClauseChange=function(e,t){var n=l.getClauseArrayByChange(r.state.partsArray,e,t),a=0===r.state.partsArray.length?null:{type:o.ClauseType.Set,logicalOperator:r.props.clauseSet.logicalOperator,parts:n};r.props.onChange&&r.props.onChange(a,r.props.id),r.setState({partsArray:n})},r.state={partsArray:r.props.clauseSet&&r.props.clauseSet.parts?r.props.clauseSet.parts:o.Immutable([])},r}return a(t,e),t.prototype.componentDidUpdate=function(e,t){this.props.clauseSet!==e.clauseSet&&this.setState({partsArray:this.props.clauseSet.parts})},t.prototype.render=function(){var e=this;return o.jsx("div",{className:this.props.className?this.props.className:""},0===this.state.partsArray.length?null:o.jsx("div",{className:"sql-expression-set"},this.state.partsArray.map((function(t,r){var n=e.props.id+"_clause_"+r;return t.displayLabel!=o.ClauseDisplayType.None&&o.jsx(i.default,{key:r.toString(),id:n,clause:t,isHosted:e.props.isHosted,expression:e.props.expression,dataSource:e.props.dataSource,onChange:e.onClauseChange})}))))},t}(o.React.PureComponent);t._SqlExprClauseSetRuntime=u;var p=o.themeUtils.withStyles(o.injectIntl(u),"SqlExpressionClauseSetRuntime");t.default=p}})}));