define(["jimu-core","jimu-ui"],(function(t,e){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=133)}([function(e,o){e.exports=t},,function(t,o){t.exports=e},,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),i=o(8);function r(t){return/^-?\d*(\.\d+)?%$/.test(t)}function a(t,e){return parseFloat(""+t)*e/100}function u(t,e){var o,n,i,r,a=null===(o=null==e?void 0:e.widgets)||void 0===o?void 0:o[t];return!(null===(i=null===(n=null==a?void 0:a.manifest)||void 0===n?void 0:n.properties)||void 0===i||!i.hasEmbeddedLayout)&&Object.keys(null!==(r=null==a?void 0:a.layouts)&&void 0!==r?r:{}).length>0}function s(t,e){var o,i,r=null===(o=null==e?void 0:e.widgets)||void 0===o?void 0:o[t];return(null===(i=null==r?void 0:r.manifest)||void 0===i?void 0:i.widgetType)!==n.WidgetType.Layout}function l(t,e,o,n){if(null==e[t]||"auto"===e[t])return e;return r(e[t])?"left"===t||"right"===t||"width"===t?r(o)?e.set(t,o):e.set(t,(100*+o/n.width).toFixed(4)+"%"):r(o)?e.set(t,o):e.set(t,(100*+o/n.height).toFixed(4)+"%"):r(o)?"left"===t||"right"===t||"width"===t?e.set(t,Math.round(parseFloat(""+o)*n.width/100)):e.set(t,Math.round(parseFloat(""+o)*n.height/100)):isNaN(+o)?e.without(t):e.set(t,Math.round(+o)+"px")}function d(){var t;return window.jimuConfig.isBuilder?null===(t=n.getAppStore().getState().appStateInBuilder)||void 0===t?void 0:t.browserSizeMode:n.getAppStore().getState().browserSizeMode}function c(){var t,e,o;return window.jimuConfig.isBuilder?null===(e=null===(t=n.getAppStore().getState().appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo)||void 0===e?void 0:e.currentPageId:null===(o=n.getAppStore().getState().appRuntimeInfo)||void 0===o?void 0:o.currentPageId}function p(){var t,e,o;return window.jimuConfig.isBuilder?null===(e=null===(t=n.getAppStore().getState().appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo)||void 0===e?void 0:e.currentPageId:null===(o=n.getAppStore().getState().appRuntimeInfo)||void 0===o?void 0:o.currentDialogId}function f(t,e,o){var n=null==o?void 0:o[t],r="width"===t?"left":"top",a="width"===t?"right":"bottom";if(!n)return null!=e[t]?i.LayoutItemSizeModes.Custom:null!=e[r]&&null!=e[a]?i.LayoutItemSizeModes.Stretch:i.LayoutItemSizeModes.Auto;if(!0===n)return null!=e[r]&&null!=e[a]?i.LayoutItemSizeModes.Stretch:i.LayoutItemSizeModes.Auto;switch(n){case i.LayoutItemSizeModes.Auto:return i.LayoutItemSizeModes.Auto;case i.LayoutItemSizeModes.Stretch:return i.LayoutItemSizeModes.Stretch;default:return i.LayoutItemSizeModes.Custom}}e.emptyFunc=function(){},e.autoBindHandlers=function(t,e){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))},e.getMaximumId=function(t){var e=-1;return t.content&&Object.keys(t.content).forEach((function(t){var o=parseInt(t,10);o>e&&(e=o)})),e},e.isPercentage=r,e.isNumber=function(t){var e=parseFloat(t);return!isNaN(e)&&isFinite(e)},e.toRatio=function(t,e){return(100*t/e).toFixed(4)+"%"},e.fromRatio=a,e.mapStateToLayoutProps=function(t,e){var o=e.layouts[t.browserSizeMode]||e.layouts[t.appConfig.mainSizeMode],n=t.appConfig.layouts;return n[o]?{layout:n[o]}:{layout:null}},e.mapStateToLayoutItemProps=function(t,e){var o,i,r,a,u,s,l,c=e.layoutId,p=t.appConfig.layouts,f=e.layoutItemId;if(!(null===(i=null===(o=null==p?void 0:p[c])||void 0===o?void 0:o.content)||void 0===i?void 0:i[f]))return{layoutItem:null,selected:!1};var y,g=!1,h=p[c].content[f],v=!1;h&&(v=Boolean(h.isPending));var m=null===(r=t.appRuntimeInfo)||void 0===r?void 0:r.selection;m&&(g=m.layoutId===e.layoutId&&m.layoutItemId===h.id,y=m.autoScroll);var I={selected:g,layoutItem:v?null:h};g&&(I.autoScroll=y);var w=null===(a=t.appRuntimeInfo)||void 0===a?void 0:a.animationPreview;if(g&&(null==w?void 0:w.layoutInfo)){var b=w.layoutInfo,S=b.layoutId,O=b.layoutItemId;I.animationPreview=S===e.layoutId&&O===e.layoutItemId,I.playMode=I.animationPreview?w.playMode:null,I.previewId=I.animationPreview?w.id:null}else if(null==w?void 0:w.pageId){var x=t.appConfig.pages[w.pageId],_=d();if((null===(u=null==x?void 0:x.layout)||void 0===u?void 0:u[_])===c){var P=null===(s=h.setting)||void 0===s?void 0:s.effect;(P=P&&(null===(l=null==P?void 0:P[n.AnimationTriggerType.ScrollIntoView])||void 0===l?void 0:l.type)!==n.AnimationType.None?P:null)&&(I.animationPreview=!0,I.playMode=n.AnimationPlayMode.AsOne,I.previewId=w.id)}}return I},e.mapStateToWidgetProps=function(t,e){var o,n,i,r,a,l,d,c,p,f=e.layoutId,y=t.appConfig.layouts;if(!y[f])return null;var g,h,v,m=y[f],I=e.layoutItemId,w=m.content[I],b=!1,S=!1,O=!1,x=!1,_=!1,P=!1,L=!1,T=!1;if(w&&w.widgetId){var j=t.appConfig.widgets[w.widgetId];g=j.style,b=!0===(null===(n=null===(o=j.manifest)||void 0===o?void 0:o.properties)||void 0===n?void 0:n.supportInlineEditing),x=!0===(null===(r=null===(i=j.manifest)||void 0===i?void 0:i.properties)||void 0===r?void 0:r.supportRepeat),L=!0===(null===(l=null===(a=j.manifest)||void 0===a?void 0:a.properties)||void 0===l?void 0:l.canCrossLayoutBoundary);var M=t.widgetsRuntimeInfo[w.widgetId];S=null!==(d=null==M?void 0:M.isClassLoaded)&&void 0!==d&&d,O=b&&(null==M?void 0:M.isInlineEditing),(T=(null===(p=null===(c=j.manifest)||void 0===c?void 0:c.extensions)||void 0===p?void 0:p.length)>0)&&(h=j),v=t.widgetsState[w.widgetId],_=s(w.widgetId,t.appConfig),P=u(w.widgetId,t.appConfig)}return{hasEmbeddedLayout:P,supportInlineEditing:b,supportRepeat:x,isClassLoaded:S,isInlineEditing:O,widgetStyle:g,canCrossLayoutBoundary:L,hasExtension:T,widgetJson:h,widgetId:w.widgetId,isFunctionalWidget:_,widgetState:v}},e.isWidgetHasEmbeddedLayout=u,e.isFunctionalWidget=s,e.isWidgetPlaceholder=function(t,e){var o,i;if(!e||e.itemType!==n.LayoutItemType.Widget)return!1;if(e.layoutInfo){var r=e.layoutInfo,a=r.layoutId,u=r.layoutItemId,s=null===(i=null===(o=t.layouts)||void 0===o?void 0:o[a].content)||void 0===i?void 0:i[u];if(s&&!s.widgetId)return!0}return!e.layoutInfo&&!e.uri},e.replaceBoundingBox=function(t,e,o){if(!t)return n.Immutable({left:r(e.left)?e.left:Math.round(e.left)+"px",right:r(e.right)?e.right:Math.round(e.right)+"px",top:r(e.top)?e.top:Math.round(e.top)+"px",bottom:r(e.bottom)?e.bottom:Math.round(e.bottom)+"px",width:r(e.width)?e.width:Math.round(e.width)+"px",height:r(e.height)?e.height:Math.round(e.height)+"px"});var i=t;return["left","right","top","bottom","width","height"].forEach((function(t){null!=i[t]?i=l(t,i,e[t],o):null!=e[t]&&(i=i.set(t,Math.round(e[t])+"px"))})),i},e.updateBoundingBoxProp=l,e.relativeClientRect=function(t,e){return{left:t.left-e.left,top:t.top-e.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height,id:null}},e.getBuilderThemeVariables=function(){var t=window.parent;if(t&&t.jimuConfig&&t.jimuConfig.isBuilder)return t._appState.theme},e.isRTL=function(){var t,e;return null!==(e=null===(t=n.getAppStore().getState().appContext)||void 0===t?void 0:t.isRTL)&&void 0!==e&&e},e.parseAspectRatio=function(t){var e=100,o=100;if("number"==typeof t)e=100,o=Math.round(100*t);else if("string"==typeof t){var n=t.split(":");e=parseInt(n[0],10),o=parseInt(n[1],10)}return o/e},e.expandStyleArray=function(t){return t&&0!==t.length?1===t.length?[t[0],t[0],t[0],t[0]]:2===t.length?[t[0],t[1],t[0],t[1]]:3===t.length?[t[0],t[1],t[2],0]:[t[0],t[1],t[2],t[3]]:[0,0,0,0]},e.calHeightOfLayoutItem=function(t,e){var o,n,u,s,l,d=null!==(o=e.setting)&&void 0!==o?o:{},c=f("height",e.bbox,d.autoProps);if(c!==i.LayoutItemSizeModes.Custom)return{setting:{autoProps:{height:c}}};if("ratio"===d.heightMode)l={setting:{heightMode:"ratio",aspectRatio:null!==(n=d.aspectRatio)&&void 0!==n?n:1,autoProps:{height:i.LayoutItemSizeModes.Custom}}};else{var p=null!==(s=null===(u=e.bbox)||void 0===u?void 0:u.height)&&void 0!==s?s:t;r(p)&&(p=a(p,t)),l={height:p,setting:{heightMode:"fixed",autoProps:{height:i.LayoutItemSizeModes.Custom}}}}return l},e.getAppConfig=function(){var t;return window.jimuConfig.isBuilder?null===(t=n.getAppStore().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig:n.getAppStore().getState().appConfig},e.getCurrentSizeMode=d,e.getCurrentPageId=c,e.getCurrentDialogId=p,e.getActivePagePart=function(){var t,e,o;return window.jimuConfig.isBuilder?null===(e=null===(t=n.getAppStore().getState().appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo)||void 0===e?void 0:e.activePagePart:null===(o=n.getAppStore().getState().appRuntimeInfo)||void 0===o?void 0:o.activePagePart},e.getCurrentDialogRootLayoutId=function(){var t,e,o,i=window.jimuConfig.isBuilder?null===(t=n.getAppStore().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig:n.getAppStore().getState().appConfig,r=p(),a=d();return null===(o=null===(e=null==i?void 0:i.dialogs[r])||void 0===e?void 0:e.layout)||void 0===o?void 0:o[a]},e.getCurrentPageRootLayoutId=function(){var t,e,o,i=window.jimuConfig.isBuilder?null===(t=n.getAppStore().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig:n.getAppStore().getState().appConfig,r=c(),a=d();return null===(o=null===(e=null==i?void 0:i.pages[r])||void 0===e?void 0:e.layout)||void 0===o?void 0:o[a]},e.getHeaderRootLayoutId=function(){var t,e,o,i=window.jimuConfig.isBuilder?null===(t=n.getAppStore().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig:n.getAppStore().getState().appConfig,r=d();return null===(o=null===(e=null==i?void 0:i.header)||void 0===e?void 0:e.layout)||void 0===o?void 0:o[r]},e.getFooterRootLayoutId=function(){var t,e,o,i=window.jimuConfig.isBuilder?null===(t=n.getAppStore().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig:n.getAppStore().getState().appConfig,r=d();return null===(o=null===(e=null==i?void 0:i.footer)||void 0===e?void 0:e.layout)||void 0===o?void 0:o[r]},e.contains=function(t,e){return e.left>=t.left&&e.left+e.width<=t.left+t.width&&e.top>=t.top&&e.top+e.height<=t.top+t.height},e.intersects=function(t,e){return!(e.left>t.left+t.width||e.left+e.width<t.left||e.top>t.top+t.height||e.top+e.height<t.top)},e.getLayoutItemSizeMode=f,e.gcd=function(t,e){for(var o=Math.max(t,e),n=Math.min(t,e);0!==n;){var i=n;n=o%n,o=i}return o}},,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.BringForward=0]="BringForward",t[t.SendBackward=1]="SendBackward",t[t.BringToFront=2]="BringToFront",t[t.SendToBack=3]="SendToBack"}(e.OrderAdjustType||(e.OrderAdjustType={})),e.COLS_IN_ONE_ROW=12,e.CONTEXT_MENU_ITEM_SIZE=28,e.CONTEXT_MENU_ICON_SIZE=16,e.MIN_LAYOUT_ITEM_SIZE=16,e.CLICK_TOLRERANCE=5,function(t){t.Auto="auto",t[t.Normal=0]="Normal",t[t.BoundaryDropArea=10]="BoundaryDropArea",t[t.DragMoveTip=20]="DragMoveTip",t[t.HandlerTools=30]="HandlerTools",t[t.DraggingItem=40]="DraggingItem"}(e.LayoutZIndex||(e.LayoutZIndex={})),function(t){t.Auto="AUTO",t.Stretch="STRETCH",t.Custom="CUSTOM"}(e.LayoutItemSizeModes||(e.LayoutItemSizeModes={}))},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0);!function(t){t.Horizontal="H",t.Vertical="V"}(e.Direction||(e.Direction={})),e.DEFAULT_GRID_SETTING={showSplitter:!0,splitterSize:5,splitterColor:"#000"},e.GridContext=n.React.createContext(e.DEFAULT_GRID_SETTING)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),i=o(31);e.DEFAULT_FIX_LAYOUT_SETTING=n.lodash.assign({},{gridSize:1}),e.DEFAULT_FIX_LAYOUT_ITEM_SETTING=n.lodash.assign({},i.DEFAULT_LAYOUT_ITEM_SETTING,{lockParent:!1,lockLayout:!1,autoProps:{}})},,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(2);e.DEFAULT_FLOW_SETTING={gutter:0,style:{padding:{number:[0],unit:"px"},justifyContent:"flex-start",alignItems:"stretch",borderRadius:{number:[0],unit:n.UnitTypes.PIXEL}}},e.DEFAULT_FLOW_ITEM_SETTING={lockParent:!0,heightMode:"auto",offsetX:0,offsetY:0}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={previousView:"Previous view",nextView:"Next view",originTL:"Top left as origin",originTR:"Top right as origin",originBL:"Bottom left as origin",originBR:"Bottom right as origin",alignLeft:"Align left",alignRight:"Align right",alignTop:"Align top",alignCenter:"Align center",alignHCenter:"Horizontal center",alignVCenter:"Vertical center",alignBottom:"Align bottom",alignStretch:"Align stretch",sendBackward:"Send backward",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",zoomoutFixed:"Zoom out fixed",order:"Order",moveToLeft:"Move to left",moveToRight:"Move to right",moveToTop:"Move to top",moveToBottom:"Move to bottom",addView:"Add view",deleteView:"Delete view",duplicateView:"Duplicate view",insertABlock:"Insert block",insertAStickGroup:"Insert stickable group",moveup:"Move up",movedown:"Move down",chooseTemplate:"Choose a page template",chooseHeaderTemplate:"Choose a header template",chooseFooterTemplate:"Choose a footer template",dropWidgetToAdd:"Or drag a widget here",snapToLeft:"Snap to left",snapToTop:"Snap to top",snapToBottom:"Snap to bottom",snapToRight:"Snap to right",fullWidth:"Full width",fullHeight:"Full height",fullSize:"Full size",restoreSize:"Restore size",pendingTip:"Move to the pending list",setting:"Settings",dragToMove:"Drag to move",lockLayout:"Lock position and size",unlockLayout:"Unlock position and size",editHeader:"Edit header",editFooter:"Edit footer",duplicate:"Duplicate",transform:"Transform",rotation:"Rotation",angle:"Angle",floating:"Pin",sinking:"Unpin",floatingArea:"Floating area",changeToAuto:"Change to auto",changeToCustom:"Change to custom",topLeft:"Top left",topRight:"Top right",bottomLeft:"Bottom left",bottomRight:"Bottom right",positionType:"Position type",sticky:"Sticky",fixed:"Fixed",flow:"Flow",stack:"Stack",fixedAtTop:"Floating at the top when scrolling",actNormal:"Act as normal widget"}},,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0);e.PageContext=n.React.createContext({viewOnly:!0,isDesignMode:!0,visible:!1,mainSizeMode:n.BrowserSizeMode.Large,browserSizeMode:n.BrowserSizeMode.Large})},,,function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=o(4),r=o(0),a=o(8);function u(t,e){var o=e,u=t.order;if(!u||0===u.length)return t;var p=r.Immutable(t),f=[];u.forEach((function(e){f.push(n({id:e},c(t.content[e].bbox,o,800)))})),f.sort(l);for(var y=[f[0]],g=function(t){var e=f[t];y.some((function(t){if(d(t,e))return t.content||(t.content=[]),t.content.push(n({},e)),!0}))||y.push(e)},h=1;h<f.length;h++)g(h);var v=0,m=[];return y.forEach((function(t){var e=0;s(t,o),t.y<v&&(e=v-t.y,t.y=v),v=t.y+t.h,p=p.setIn(["content",t.id,"bbox"],{left:i.toRatio(t.x,o),top:t.y+"px",width:i.toRatio(t.w,o),height:t.h+"px"}).setIn(["content",t.id,"setting","autoProps","width"],a.LayoutItemSizeModes.Custom),m.push(t.id),t.content&&t.content.forEach((function(n){s(n,o),e>0&&(n.y+=e),p=p.setIn(["content",t.id,"bbox"],{left:i.toRatio(t.x,o),top:t.y+"px",width:i.toRatio(t.w,o),height:t.h+"px"}).setIn(["content",t.id,"setting","autoProps","width"],a.LayoutItemSizeModes.Custom),m.push(n.id)}))})),p=p.set("order",m)}function s(t,e,o){t.x>e&&(o?t.x=e-t.w:(t.x=0,t.y+=t.h)),t.x<0&&(t.x=0),t.x+t.w>e&&(t.w<e?t.x=e-t.w:(t.w=e,t.x=0))}function l(t,e){return t.y!==e.y?t.y>e.y?1:-1:t.x!==e.x?t.x>e.x?1:-1:0}function d(t,e){return t.x<=e.x&&t.x+t.w>e.x+e.w&&t.y<=e.y&&t.y+t.h>e.y+e.h}function c(t,e,o){var n={},r=0,a=0,u=e,s=.2*o;return t&&(["left","right","top","bottom","width","height"].forEach((function(r){if(void 0!==t[r]&&"auto"!==t[r]){var a=["left","right","width"].indexOf(r)>=0?e:o;n[r]=i.isPercentage(t[r])?i.fromRatio(t[r],a):parseFloat(t[r])}})),void 0!==n.left&&(r=n.left),void 0!==n.width?(u=n.width,void 0===n.left&&void 0!==n.right&&(r=e-n.right-u)):u=e-(n.left||0)-(n.right||0),void 0!==n.top&&(a=n.top),void 0!==n.height?(s=n.height,void 0===n.top&&void 0!==n.bottom&&(a=o-n.bottom-s)):void 0!==n.top&&void 0!==n.bottom&&(s=o-n.top-n.bottom)),{x:r,y:a,w:u,h:s}}function p(t,e){var o,n,r,u,s={},l=i.isRTL(),d=e&&e.autoProps||{},c=t;l&&(d=f(d),c=y(c));var p=i.getLayoutItemSizeMode("height",t,d),g=i.getLayoutItemSizeMode("width",t,d);if(p===a.LayoutItemSizeModes.Stretch)s.top=c.top,s.bottom=c.bottom;else{var h=null!==(o=d.top)&&void 0!==o&&o,v=null!==(n=d.bottom)&&void 0!==n&&n;p===a.LayoutItemSizeModes.Custom&&(s.height=c.height),h!==v&&!v||null==t.top?s.bottom=c.bottom:s.top=c.top}if(g===a.LayoutItemSizeModes.Stretch)s.left=c.left,s.right=c.right;else{var m=null!==(r=d.left)&&void 0!==r&&r,I=null!==(u=d.right)&&void 0!==u&&u;g===a.LayoutItemSizeModes.Custom&&(s.width=c.width),m===I?i.isRTL()&&null!=c.right?s.right=c.right:s.left=c.left:m&&null!=c.right?s.right=c.right:s.left=c.left}return s}function f(t){var e=r.Immutable(t),o=t.left;return e.set("left",t.right).set("right",o)}function y(t){var e=r.Immutable(t),o=t.left;return e.set("left",t.right).set("right",o)}function g(t,e){return i.getLayoutItemSizeMode("width",t,e.autoProps)===a.LayoutItemSizeModes.Custom&&i.getLayoutItemSizeMode("height",t,e.autoProps)===a.LayoutItemSizeModes.Custom&&"ratio"===e.heightMode}e.parseTranslateCoords=function(t){var e=0,o=0;if(t&&0===t.indexOf("translate(")){var n=t.substring("translate(".length).split(",");n.length>1&&(e=parseFloat(n[0]),o=parseFloat(n[1]))}return{x:e,y:o}},e.sortLayoutItems=function(t){if(!t.content||0===Object.keys(t.content).length)return[];var e=function(t){return i.isPercentage(t)?1280*parseFloat(t)/100:+t};return Object.keys(t.content).map((function(e){return t.content[e]})).sort((function(t,o){var n=e(t.bbox.top),i=e(o.bbox.top);if(n>i)return 1;if(n<i)return-1;var r=e(t.bbox.left),a=e(o.bbox.left);return r>a?1:r<a?-1:0})).map((function(t){return t.id}))},e.fixedLayoutTransform=function(t,e,o){var n=r.utils.getSizeModeWidth(e),i=r.utils.getSizeModeWidth(o);return n<i?t:u(t,i)},e.autoResponseToDevice=u,e.intersects=function(t,e){var o=Math.max(t.x,e.x),n=Math.min(t.x+t.w,e.x+e.w),i=Math.max(t.y,e.y),r=Math.min(t.y+t.h,e.y+e.h);return o<n&&i<r},e.contains=d,e.mergePos=function(t,e){var o=Math.min(t.x,e.x),n=Math.min(t.y,e.y);return{x:o,y:n,w:Math.max(t.x+t.w,e.x+e.w)-o,h:Math.max(t.y+t.h,e.y+e.h)-n}},e.getAbsolutePos=c,e.generateResizingBBoxStyle=function(t,e,o){var n={};n.left=t.left+o.dx,n.width=t.width+o.dw;var i=e.right-t.right;0===o.dw?n.right=i-o.dx:0===o.dx?n.right=i-o.dw:n.right=i,n.top=t.top+o.dy,n.height=t.height+o.dh;var r=e.bottom-t.bottom;return 0===o.dh?n.bottom=r-o.dy:0===o.dy?n.bottom=r-o.dh:n.bottom=r,n},e.generateFixedStyle=function(t,e,o,r,a,u){var s={},l={};return["left","top","right","bottom","width","height"].forEach((function(e){var o="left"===e||"right"===e||"width"===e?r:a;l[e]=i.isPercentage(t[e])?i.fromRatio(t[e],o):parseFloat(t[e])})),e?((s=p(l,{autoProps:n(n({},null==u?void 0:u.autoProps),{bottom:!0,top:!1})})).position="fixed",s):"top"===o?p(t,u):(l.bottom=0,p(l,{autoProps:n(n({},null==u?void 0:u.autoProps),{bottom:!1,top:!0})}))},e.generateBBoxStyle=p,e.flipAutoProps=f,e.flipBBox=y,e.applyPositionSetting=function(t,e,o){void 0===o&&(o=!1);var n={};return e.hCenter&&e.vCenter?(n.left="50%",n.right="auto",n.top="50%",n.transform="translate(-50%, -50%)"):e.hCenter?(n.left="50%",n.right="auto",n.transform="translateX(-50%)"):e.vCenter&&(n.top="50%",n.transform="translateY(-50%)"),!o&&g(t,e)&&(n.height="auto"),n},e.forceAspectRatio=g,e.applySnapResult=function(t,e,o){var n=r.Immutable(t),a=i.isPercentage(t.left)?i.fromRatio(t.left,e.width):parseFloat(t.left),u=i.isPercentage(t.right)?i.fromRatio(t.right,e.width):parseFloat(t.right),s=i.isPercentage(t.width)?i.fromRatio(t.width,e.width):parseFloat(t.width);isNaN(a)&&(n=n.set("left",e.width-u-s)),isNaN(u)&&(n=n.set("right",e.width-a-s)),isNaN(s)&&(n=n.set("width",e.width-u-a)),o.left&&(n=n.set("left",0)),o.right&&(n=n.set("right",0));var l=i.isPercentage(t.top)?i.fromRatio(t.top,e.height):parseFloat(t.top),d=i.isPercentage(t.bottom)?i.fromRatio(t.bottom,e.height):parseFloat(t.bottom),c=i.isPercentage(t.height)?i.fromRatio(t.height,e.height):parseFloat(t.height);return isNaN(l)&&(n=n.set("top",e.height-d-c)),isNaN(d)&&(n=n.set("bottom",e.height-l-c)),isNaN(c)&&(n=n.set("height",e.height-d-l)),o.top&&(n=n.set("top",0)),o.bottom&&(n=n.set("bottom",0)),n}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(2),i=o(23);e.mapStateToFlowItemProps=function(t,e){var o,r,a,u,s=!0,l=!1,d=e.layoutItem,c=d.widgetId,p=t.appConfig.widgets[c],f=n.styleUtils.expandStyleArray(null===(a=null===(r=null===(o=p.config)||void 0===o?void 0:o.style)||void 0===r?void 0:r.padding)||void 0===a?void 0:a.number),y=Object.keys(p.layouts)[0],g=i.findLayoutId(p.layouts[y],t.browserSizeMode,t.appConfig.mainSizeMode),h=t.appConfig.layouts[g];h&&Object.keys(h.content||[]).length>0&&Object.keys(h.content||[]).some((function(t){if(!h.content[t].isPending)return s=!1,!0}));var v=null===(u=t.appRuntimeInfo)||void 0===u?void 0:u.selection;return v&&(l=v.layoutId===e.layoutId&&v.layoutItemId===d.id),{isEmpty:s,selected:l,padding:f[0]+f[2]}},e.getWidthFromSetting=function(t){var e=parseFloat(null==t?void 0:t.width);return e>0?(""+t.width).indexOf("px")>=0?Math.round(e)+"px":Math.round(e)+"%":"100%"}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0);function i(t,e,o){return void 0===o&&(o=!1),(null==t?void 0:t.content)?Object.keys(t.content).filter((function(i){return t.content[i].type===e&&!!(e===n.LayoutItemType.Widget?t.content[i].widgetId:t.content[i].sectionId)&&(o||!t.content[i].isPending)})).map((function(o){return e===n.LayoutItemType.Widget?t.content[o].widgetId:t.content[o].sectionId})):[]}function r(t,e,o){if(!(null==t?void 0:t.content))return null;var n=Object.keys(t.content).find((function(n){return t.content[n].type===o&&(t.content[n].widgetId===e||t.content[n].sectionId===e)&&!t.content[n].isPending}));return t.content[n]}function a(t,e,o){void 0===o&&(o=!1);var n=t.layouts[e];return(null==n?void 0:n.content)?o?Object.keys(n.content):Object.keys(n.content).filter((function(t){return!n.content[t].isPending})):[]}function u(t,e,o,r,a){void 0===a&&(a=!1);var s=[],l=i(t.layouts[e],n.LayoutItemType.Widget,a),d=i(t.layouts[e],n.LayoutItemType.Section,a);return s=o===n.LayoutItemType.Widget?s.concat(l):s.concat(d),l.filter((function(e){return t.widgets&&t.widgets[e]&&t.widgets[e].manifest.widgetType===n.WidgetType.Layout})).forEach((function(e){Object.keys(t.widgets[e].layouts).forEach((function(n){var i=p(t.widgets[e].layouts[n],r,t.mainSizeMode);s=s.concat(u(t,i,o,r,a))}))})),s}function s(t,e,o,i){var r=t.pages&&Object.keys(t.pages).find((function(n){var r=p(t.pages[n].layout,i,t.mainSizeMode);return u(t,r,o,i).indexOf(e)>-1}));if(r)return{type:n.ContainerType.Page,id:r};var a=t.dialogs&&Object.keys(t.dialogs).find((function(n){var r=p(t.dialogs[n].layout,i,t.mainSizeMode);return u(t,r,o,i).indexOf(e)>-1}));if(a)return{type:n.ContainerType.Dialog,id:a};if(t.header){var s=p(t.header.layout,i,t.mainSizeMode);if(u(t,s,o,i).indexOf(e)>-1)return{type:n.ContainerType.Header,id:"header"}}if(t.footer){s=p(t.footer.layout,i,t.mainSizeMode);if(u(t,s,o,i).indexOf(e)>-1)return{type:n.ContainerType.Footer,id:"footer"}}var l=t.views&&Object.keys(t.views).find((function(n){var r=p(t.views[n].layout,i,t.mainSizeMode);return u(t,r,o,i).indexOf(e)>-1}));return l?{type:n.ContainerType.View,id:l}:void 0}function l(t,e,o,n){return u(t,p(t.pages[e].layout,n,t.mainSizeMode),o,n)}function d(t,e,o,n){return u(t,p(t.dialogs[e].layout,n,t.mainSizeMode),o,n)}function c(t,e,o,n){var i;return u(t,p(null===(i=t.views[e])||void 0===i?void 0:i.layout,n,t.mainSizeMode),o,n)}function p(t,e,o){return t?t[e]||t[o]:null}function f(t,e,o){return u(t,p(t.header.layout,o,t.mainSizeMode),e,o)}function y(t,e,o){return u(t,p(t.footer.layout,o,t.mainSizeMode),e,o)}function g(t,e,o,n){return Object.keys(t.widgets).find((function(i){var r=t.widgets[i];if(r.layouts)return Object.keys(r.layouts).some((function(i){var a=r.layouts[i][n],u=t.layouts[a];return u&&u.content&&void 0!==Object.keys(u.content).find((function(t){return u.content[t].type===o&&(u.content[t].widgetId===e||u.content[t].sectionId===e)}))}))}))}function h(t,e,o,i){if(!t.widgets[o])return[];var r=t.layouts[e.layoutId]&&t.layouts[e.layoutId].content&&t.layouts[e.layoutId].content[e.layoutItemId];if(!r)return[];var a=r.type,u=void 0;return a===n.LayoutItemType.Section?u=r.sectionId:a===n.LayoutItemType.Widget&&(u=r.widgetId),u?v(t,u,a,o,i):m(t,o,e)?[e]:[]}function v(t,e,o,i,r){var a=t.widgets[i];if(!a||!e)return[];var u=[];return a.layouts&&Object.keys(a.layouts).forEach((function(i){var s=a.layouts[i][r],l=t.layouts[s];l&&l.content&&Object.keys(l.content).forEach((function(i){var a=l.content[i];if(a.type!==o||a.widgetId!==e&&a.sectionId!==e){if(a.type===n.LayoutItemType.Widget){var s=t.widgets[a.widgetId];s&&s.manifest.widgetType===n.WidgetType.Layout&&u.push.apply(u,v(t,e,o,s.id,r))}}else u.push({layoutId:l.id,layoutItemId:a.id})}))})),u}function m(t,e,o){var n=t.widgets[e];if(!n)return!1;var i=!1;return n.layouts&&Object.keys(n.layouts).forEach((function(e){i||Object.keys(n.layouts[e]).forEach((function(r){if(!i){var u=n.layouts[e][r];a(t,u,!0).forEach((function(t){i||o.layoutId===u&&o.layoutItemId===t&&(i=!0)}))}}))})),i}e.findLayoutItem=function(t,e){var o,n,i;if(!e)return null;var r=e.layoutId,a=e.layoutItemId;return null===(i=null===(n=null===(o=t.layouts)||void 0===o?void 0:o[r])||void 0===n?void 0:n.content)||void 0===i?void 0:i[a]},e.findParentSectionId=function(t,e){if(t.sections)for(var o in t.sections){if(t.sections[o].views.indexOf(e)>=0)return o}return null},e.findParentViewId=function(t,e){if(t.views)for(var o in t.views){var n=t.views[o];for(var i in n.layout)if(n.layout[i]==e)return o}return null},e.getContentsInLayout=i,e.getContentsInLayoutRecursive=function t(e,o,r,a,u){void 0===u&&(u=!1);var s=[],l=i(e.layouts[o],n.LayoutItemType.Widget,u),d=i(e.layouts[o],n.LayoutItemType.Section,u);return s=r===n.LayoutItemType.Widget?s.concat(l):s.concat(d),l.filter((function(t){var o,i,r,a,u;return(null===(i=null===(o=e.widgets[t])||void 0===o?void 0:o.manifest)||void 0===i?void 0:i.widgetType)===n.WidgetType.Layout||(null===(u=null===(a=null===(r=e.widgets[t])||void 0===r?void 0:r.manifest)||void 0===a?void 0:a.properties)||void 0===u?void 0:u.hasEmbeddedLayout)})).forEach((function(o){var n;Object.keys(null!==(n=e.widgets[o].layouts)&&void 0!==n?n:{}).forEach((function(n){var i=e.widgets[o].layouts[n][a];s=s.concat(t(e,i,r,a,u))}))})),d.forEach((function(o){var n,i;null===(i=null===(n=e.sections)||void 0===n?void 0:n[o])||void 0===i||i.views.forEach((function(o){e.views[o]&&e.views[o].layout[a]&&(s=s.concat(t(e,e.views[o].layout[a],r,a,u)))}))})),s},e.getContainerLayoutItem=r,e.getLayoutItemIds=a,e.getLayoutItemsByType=function(t,e,o){return void 0===o&&(o=!1),(null==t?void 0:t.content)?Object.keys(t.content).filter((function(i){return t.content[i].type===e&&!!(e===n.LayoutItemType.Widget?t.content[i].widgetId:t.content[i].sectionId)&&(o||!t.content[i].isPending)})).map((function(e){return{layoutId:t.id,layoutItemId:e}})):[]},e.getWidgetsOrSectionsInLayoutWithLayoutWidgetOnly=u,e.getWidgetIdThatUseTheLayoutId=function(t,e){return Object.keys(t.widgets).find((function(o){var n=t.widgets[o];if(n.layouts)return Object.keys(n.layouts).some((function(t){return void 0!==Object.keys(n.layouts[t]).find((function(o){return n.layouts[t][o]===e}))}))}))},e.getWidgetOrSectionContainerInfo=s,e.getWidgetsOrSectionsInPageBody=l,e.getWidgetsOrSectionsInDialog=d,e.getWidgetsOrSectionsInView=c,e.findLayoutId=p,e.getWidgetsOrSectionsInPageHeader=f,e.getWidgetsOrSectionsInPageFooter=y,e.getLayoutItemsHoldWidgetOrSection=function(t,e,o,i){if(i){var u=g(t,o,e,i);if(u)return v(t,o,e,u,i);var l=s(t,o,e,i);if(!l)return[];var d=function(t,e,o){return e.type===n.ContainerType.Footer?t.footer.layout[o]:e.type===n.ContainerType.Header?t.header.layout[o]:t[e.type][e.id].layout[o]}(t,l,i);return[{layoutId:d,layoutItemId:r(t.layouts[d],o,e).id}]}var c=[];return Object.keys(t.layouts).forEach((function(n){a(t,n,!0).forEach((function(i){var r=t.layouts[n].content[i];e!==r.type||r.widgetId!==o&&r.sectionId!==o||c.push({layoutId:n,layoutItemId:i})}))})),c},e.getParentWidgetIdOfWidgetOrSection=g,e.getChildrenWidgetsOrSections=function(t,e,o,n){var r=t.widgets[e];if(!r.layouts)return[];var a=[];return Object.keys(r.layouts).forEach((function(e){Object.keys(r.layouts[e]).forEach((function(u){var s=t.layouts[r.layouts[e][u]];a=a.concat(i(s,o,n))}))})),Array.from(new Set(a))},e.getWidgetOrSectionLayoutInfosInOneSizeMode=function(t,e,o,n){var i=[],a=!1,u=function(t,e,o,u){var s=p(o,n,void 0),l=r(t.layouts[s],e,u),d=void 0;return l&&(d={layoutId:s,layoutItemId:l.id},i.push(d),a=!0),d};return t.pages&&Object.keys(t.pages).find((function(n){var i=t.pages[n];return!(!i.layout||!u(t,e,i.layout,o))})),a?i:(t.views&&Object.keys(t.views).find((function(n){var i=t.views[n];return!!u(t,e,i.layout,o)})),a?i:(t.dialogs&&Object.keys(t.dialogs).find((function(n){var i=t.dialogs[n];return!!u(t,e,i.layout,o)})),a?i:(t.header&&u(t,e,t.header.layout,o),a?i:(t.footer&&u(t,e,t.footer.layout,o),a||t.widgets&&Object.keys(t.widgets).find((function(n){var i=t.widgets[n];return i.layouts&&Object.keys(i.layouts).forEach((function(n){u(t,e,i.layouts[n],o)})),!!a})),i))))},e.getBrowserSizeModeByLayoutIdAndWidgetId=function(t,e,o){var n=t.widgets[o];if(n){var i=void 0;return Object.keys(n.layouts).find((function(t){if(Object.keys(n.layouts[t]).find((function(o){if(n.layouts[t][o]===e)return i=o,!0})))return!0})),i}},e.getLayoutInfosInWidgetByLayoutInfo=h,e.getLayoutItemsInWidgetByLayoutInfo=function(t,e,o,n){return h(t,e,o,n).map((function(e){return t.layouts[e.layoutId][e.layoutItemId]}))},e.getLayoutInfosInWidgetByWidgetOrSectionId=v,e.checkIsLayoutInfoInWidget=m,e.getWidgetsOrSectionsInTheSameContainer=function(t,e,o,i,r){var a=s(t,e,o,r);if(!a)return[];switch(a.type){case n.ContainerType.Page:return l(t,a.id,i,r);case n.ContainerType.Header:return f(t,i,r);case n.ContainerType.Footer:return y(t,i,r);case n.ContainerType.View:return c(t,a.id,i,r);case n.ContainerType.Dialog:return d(t,a.id,i,r)}}},function(t,e,o){"use strict";var n=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},r=this&&this.__rest||function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(o[n[i]]=t[n[i]])}return o};Object.defineProperty(e,"__esModule",{value:!0});var a,u=o(0),s=o(4),l=o(60),d=o(61),c=o(62),p=o(18);e.default=function(t){var e,o,f,y,g,h,v,m,I,w,b,S=u.ReactRedux.useSelector((function(e){return function(t,e){var o=s.mapStateToLayoutItemProps(t,e);if(!o.layoutItem)return o;if(o.layoutItem.type===u.LayoutItemType.Widget)return i(i({},o),s.mapStateToWidgetProps(t,e));var n=l.getSectionInfo(t,o.layoutItem.sectionId);return i(i({},o),n)}(e,t)}),u.ReactRedux.shallowEqual),O=i(i({},t),S),x=u.React.useRef(),_=O.layoutId,P=O.layoutItemId,L=O.layoutItem,T=O.animationStyle,j=O.isPlaying,M=O.style,C=O.className,R=(O.children,r(O,["style","className","children"])),k=(null==L?void 0:L.type)===u.LayoutItemType.Widget,A=(null==L?void 0:L.type)===u.LayoutItemType.Section,E=u.React.useState(),B=E[0],F=E[1],W=u.React.useState(),z=W[0],N=W[1],D=u.React.useRef(),H=u.React.useRef(),V=u.React.useContext(u.AnimationContext),U=u.React.useContext(p.PageContext).visible;D.current=B,H.current=z;var G=null!==(o=null===(e=O.layoutItem)||void 0===e?void 0:e.setting)&&void 0!==o?o:{},X=G.effect,Y=G.oneByOneEffect;X=X&&(null===(f=null==X?void 0:X[u.AnimationTriggerType.ScrollIntoView])||void 0===f?void 0:f.type)!==u.AnimationType.None?X:null,Y=Y&&(null===(y=null==Y?void 0:Y[u.AnimationTriggerType.ScrollIntoView])||void 0===y?void 0:y.type)!==u.AnimationType.None?Y:null,u.React.useEffect((function(){U?(F(Symbol("play on visible")),N(Symbol("play on visible"))):(F(Symbol("hide on invisible")),N(Symbol("hide on invisible")))}),[U]);var Z=u.React.useCallback((function(){D.current&&F(null)}),[]),J=u.React.useCallback((function(){H.current&&N(null)}),[]);if(!O.layoutItem||k&&!L.widgetId||A&&!L.sectionId)return null;var q="string"==typeof M?JSON.parse(M):i({},M),K=X?U?null===(g=null==X?void 0:X[u.AnimationTriggerType.ScrollIntoView])||void 0===g?void 0:g.type:u.AnimationType.FadeOut:null,$=U?null===(h=null==X?void 0:X[u.AnimationTriggerType.ScrollIntoView])||void 0===h?void 0:h.option:null,Q=null!==(w=null===(I=null===(m=null===(v=L.setting)||void 0===v?void 0:v.style)||void 0===m?void 0:m.transform)||void 0===I?void 0:I.rotate)&&void 0!==w?w:0;return u.jsx(u.AnimationContext.Provider,{value:{trigger:D.current?u.AnimationTriggerType.Manual:u.AnimationTriggerType.ScrollIntoView,setting:i(i({},null==Y?void 0:Y[u.AnimationTriggerType.ScrollIntoView]),{type:Y?U?null===(b=null==Y?void 0:Y[u.AnimationTriggerType.ScrollIntoView])||void 0===b?void 0:b.type:u.AnimationType.FadeOut:null}),inheritedOneByOneSetting:t.isInSection?null:V.setting,playId:D.current,depth:V.depth+1,onAnimationEnd:Z}},u.jsx(u.Animation,{type:K,trigger:z?u.AnimationTriggerType.Manual:u.AnimationTriggerType.ScrollIntoView,configType:null==$?void 0:$.configType,direction:null==$?void 0:$.direction,animationStyle:T,isPlaying:j,playId:z,onAnimationEnd:J,ref:x,css:u.css(a||(a=n(["\n          position: relative;\n          overflow: visible;\n        "],["\n          position: relative;\n          overflow: visible;\n        "]))),style:q,className:u.classNames("d-flex layout-item",C,{"is-widget":k,"is-section":A}),"data-layoutitemid":P,"data-layoutid":_},k&&u.jsx(d.WidgetRenderer,i({rotate:Q},R)),A&&u.jsx(c.SectionRenderer,i({rotate:Q},R)),t.children))}},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),u=o(4),s=o(42),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(){var t=this.props.layout;if(!t)return null;var e=s.findLayoutViewer(t.type||a.LayoutType.FlowLayout);return e?a.React.createElement(e,r({},this.props)):null},e}(a.React.PureComponent);e.default=a.ReactRedux.connect(u.mapStateToLayoutProps)(l)},,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_VIEW_ITEM_SETTING={position:"auto",fadeInOut:!1}},,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_LAYOUT_ITEM_SETTING={order:0}},,,,,function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},u=this&&this.__rest||function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(o[n[i]]=t[n[i]])}return o};Object.defineProperty(e,"__esModule",{value:!0});var s,l=o(0),d=o(2),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.calRenderInfo=function(){var t,e,o,n,i=this.props,r=i.views,a=i.navInfo,u=i.activeView,s=r;a?(s=null!==(t=a.visibleViews)&&void 0!==t?t:r,a.useProgress?(n=a.progress,e=l.getIndexFromProgress(n,s.length).currentIndex):(e=Math.max(0,s.indexOf(a.currentViewId)),o=a.previousViewId?Math.max(0,s.indexOf(a.previousViewId)):Math.max(0,e-1))):(e=Math.max(0,s.indexOf(u.id)),o=l.clamp(e-1,0,s.length-1));return{currentIndex:e,previousIndex:o,progress:n,viewTransition:this.getTransitionOfView(s[e])}},e.prototype.renderSectionContent=function(){var t=this,e=this.props,o=e.views,n=e.navInfo,i=e.animationPreview,r=e.playMode,a=o.map((function(e){return t.renderView(e)})),u=i&&r===l.AnimationPlayMode.OneByOne,s=this.calRenderInfo(),d=s.currentIndex,c=s.previousIndex,p=s.progress,f=s.viewTransition;return l.jsx(l.AnimationContext.Consumer,null,(function(e){var o,i=e.isDesignMode,r=e.setting,s=e.playId;return l.jsx(l.AnimationContext.Provider,{value:{trigger:l.AnimationTriggerType.Manual,setting:!i||u||(null==n?void 0:n.playId)&&(null==n?void 0:n.withOneByOne)?r:null,playId:!i||u?s:null,inheritedOneByOneSetting:null,isDesignMode:i,depth:e.depth+1}},l.jsx(l.React.Fragment,null,l.jsx("div",{className:"section-content"},l.jsx(l.TransitionContainer,{useProgress:null!==(o=null==n?void 0:n.useProgress)&&void 0!==o&&o,previousIndex:c,currentIndex:d,progress:p,transitionType:null==f?void 0:f.type,direction:null==f?void 0:f.direction,playId:null==n?void 0:n.playId,withOneByOne:null==n?void 0:n.withOneByOne},a)),t.props.children))}))},e.prototype.getSizemodeLayoutOfView=function(t){var e,o,n=l.getAppStore().getState().appConfig;return null===(o=null===(e=null==n?void 0:n.views)||void 0===e?void 0:e[t])||void 0===o?void 0:o.layout},e.prototype.getTransitionOfView=function(t){var e,o,n,i=l.getAppStore().getState().appConfig;return null!==(n=null===(o=null===(e=null==i?void 0:i.views)||void 0===e?void 0:e[t])||void 0===o?void 0:o.transition)&&void 0!==n?n:this.props.transition},e.prototype.renderView=function(t){var e=this.getSizemodeLayoutOfView(t),o=this.props.layoutEntryComponent;return l.jsx("div",{className:"w-100 h-100 d-flex section-view",style:this.getBackgroundStyle(t),key:t},l.jsx(l.ErrorBoundary,null,l.jsx(o,{layouts:e,isInSection:!0,className:"w-100"})))},e.prototype.getBackgroundStyle=function(t){var e,o=l.getAppStore().getState().appConfig,n=null===(e=null==o?void 0:o.views)||void 0===e?void 0:e[t],i={};n.backgroundIMage&&(i="string"==typeof n.backgroundIMage?{}:n.backgroundIMage);var r=n.backgroundPosition?d.FillType[n.backgroundPosition.toUpperCase()]:d.FillType.FILL,a={color:n.backgroundIMage||n.backgroundColor?n.backgroundColor:"transparent",fillType:r,image:i};return d.styleUtils.toBackgroundStyle(a)},e.prototype.getStyle=function(){return l.css(s||(s=r(["\n      overflow: auto;\n      position: relative;\n\n      .section-content {\n        position: relative;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n        z-index: 0;\n      }\n\n      .section-view {\n        position: absolute;\n      }\n\n      &.aspect-ratio-wrapper {\n        padding-top: ","%;\n      }\n      &.aspect-ratio-wrapper > .section-content {\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n      }\n\n      .hidden {\n        display: none !important;\n      }\n    "],["\n      overflow: auto;\n      position: relative;\n\n      .section-content {\n        position: relative;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n        z-index: 0;\n      }\n\n      .section-view {\n        position: absolute;\n      }\n\n      &.aspect-ratio-wrapper {\n        padding-top: ","%;\n      }\n      &.aspect-ratio-wrapper > .section-content {\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n      }\n\n      .hidden {\n        display: none !important;\n      }\n    "])),100*(this.props.aspectRatio||0))},e.prototype.render=function(){var t=this.props,e=t.sectionId,o=t.className,n=t.style,i=t.sectionStyle,r=t.forceAspectRatio,s=t.aspectRatio,c=t.rotate,p=d.styleUtils.toCSSStyle(i),f=p.transform,y=u(p,["transform"]),g=c>0||c<0?"rotateZ("+c+"deg)":"",h=g;return f&&(h=f+" "+g),l.jsx("div",{className:l.classNames("section-layout w-100",o,{"aspect-ratio-wrapper":r&&s>0}),css:this.getStyle(),"data-sectionid":e,style:a(a(a({},n),y),{transform:h})},this.renderSectionContent())},e}(l.React.PureComponent);e.SectionRendererBase=c},function(t,e,o){"use strict";t.exports=function(t,e,o,n,i,r,a,u){if(!t){var s;if(void 0===e)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[o,n,i,r,a,u],d=0;(s=new Error(e.replace(/%s/g,(function(){return l[d++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(0),a=o(4),u=function(t){function e(e){var o,n=t.call(this,e)||this;if(!n.props.layout)return n;var i=r.ExtensionManager.getInstance().getExtensions(""+r.extensionSpec.ExtensionPoints.LayoutTransformer);if(i&&i.length>0){var a=i.find((function(t){return t.layoutType===n.props.layout.type}));n.layoutTransform=null===(o=a)||void 0===o?void 0:o.transformLayout}return n.debounceResizeHandler=r.lodash.debounce(n.onItemHeightChange.bind(n),200),n.resizeObserver=new r.ResizeObserver(n.debounceResizeHandler),n.itemHeights={},n}return i(e,t),e.prototype.collectItemsCanbeFixed=function(){var t=this,e=this.props.layout;return Object.keys(e.content||{}).filter((function(o){return t.isItemSupportFixed(e.content[o])})).map((function(o){var n=e.content[o].bbox,i=a.isPercentage(n.top)?a.fromRatio(n.top,t.containerHeight):parseFloat(n.top);return{id:o,top:i,bottom:i+(a.isPercentage(n.height)?a.fromRatio(n.height,t.containerHeight):parseFloat(n.height))}})).sort((function(t,e){return t.bottom-e.bottom}))},e.prototype.isItemSupportFixed=function(t){var e,o=t.setting;return!this.pageContext.isDesignMode&&(null==o?void 0:o.fixedAtTop)&&!(null===(e=null==o?void 0:o.autoProps)||void 0===e?void 0:e.top)},e.prototype.isMovingUp=function(t){return this.intersectionTop>t.top},e.prototype.onMinHeightChanged=function(t){},e.prototype.isResizingItem=function(){return!1},e.prototype.onResize=function(t,e){this.containerHeight=e,this.containerWidth=t},e.prototype.getScrollbarWidth=function(){return this.ref?document.body.offsetWidth-this.ref.offsetWidth:0},e.prototype.onItemHeightChange=function(t){var e=this;if(!this.isResizingItem()){var o=!1;if(t.forEach((function(t){var n,i,r,u,s=t.target,l=s.getAttribute("data-layoutitemid"),d=null===(n=e.props.layout.content)||void 0===n?void 0:n[l];d&&((null===(r=null===(i=d.setting)||void 0===i?void 0:i.autoProps)||void 0===r?void 0:r.height)||!a.isPercentage(null===(u=d.bbox)||void 0===u?void 0:u.height))&&(e.itemHeights[l]||(e.itemHeights[l]={}),e.itemHeights[l].space=Math.ceil(s.offsetTop+s.offsetHeight),e.itemHeights[l].height!==Math.ceil(t.contentRect.height)&&(e.itemHeights[l].height=Math.ceil(t.contentRect.height),o=!0))})),o){var n=0;Object.keys(this.itemHeights).forEach((function(t){return n=e.itemHeights[t].space>n?e.itemHeights[t].space:n})),this.onMinHeightChanged(Math.round(n))}}},e.prototype.cleanupItemHeights=function(){var t=this,e=this.props.layout,o=Object.keys(this.itemHeights),n=!1;if(o.forEach((function(o){var i=e.content[o];i&&!i.isPending||(delete t.itemHeights[o],n=!0)})),n){var i=0;Object.keys(this.itemHeights).forEach((function(e){return i=t.itemHeights[e].space>i?t.itemHeights[e].space:i})),this.onMinHeightChanged(Math.round(i))}},e}(r.React.PureComponent);e.FixedLayoutBase=u},,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),i=function(){function t(){this.id="flow-layout-transformer",this.layoutType=n.LayoutType.FlowLayout}return t.prototype.transformLayout=function(t,e,o){if(e!==o&&o===n.BrowserSizeMode.Small){var i=n.Immutable(t);return(t.order||[]).forEach((function(t){i=i.setIn(["content",t,"setting","heightMode"],"auto")})),i}return t},t.prototype.transformLayoutItem=function(t,e,o,n,i,r){return{index:e,item:t}},t}();e.FlowLayoutTransformer=i},,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={},i={};e.registerLayoutBuilder=function(t,e){n[t]=e},e.registerLayoutViewer=function(t,e){i[t]=e},e.findLayoutBuilder=function(t){return n[t]},e.findLayoutViewer=function(t){return i[t]}},,,,,,,,,,,,,,,,,function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var u,s,l=o(0),d=o(2),c=o(18),p=o(136),f=o(4),y=o(10),g=function(t){function e(e){var o=t.call(this,e)||this;return o.props.layout?(o.state={minHeight:0,isFixedTriggered:!1,attach:"top"},o.debounceResizeHandler=l.lodash.debounce(o.onResize.bind(o),200),o):o}return i(e,t),e.prototype.onMinHeightChanged=function(t){this.setState({minHeight:t})},e.prototype.onResize=function(e,o){t.prototype.onResize.call(this,e,o),this.isFixedTriggered&&!this.pageContext.isDesignMode&&this.setState({width:e,height:o})},e.prototype.createItem=function(t,e,o,n){var i=this.props,r=i.restricted,a=i.isInFirstScreen,u=t.content[e],s=this.isItemSupportFixed(u);return l.jsx(p.default,{key:e,index:o,layoutId:t.id,layoutItemId:e,layoutItem:u,isLayoutRestricted:r,transformedBBox:n?t.content[e].bbox:null,resizeObserver:r?null:this.resizeObserver,canBeFixed:s,isFixed:!!s&&this.state.isFixedTriggered,attach:s?this.state.attach:null,containerWidth:s?this.containerWidth:0,containerHeight:s?this.containerHeight:0,scrollbarWidth:s?this.getScrollbarWidth():0,isInFirstScreen:a&&!r,isInSection:this.props.isInSection})},e.prototype.getStyle=function(){return l.css(u||(u=r(["\n      .viewport-area {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100px;\n        pointer-events: none;\n        background: transparent;\n      }\n    "],["\n      .viewport-area {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100px;\n        pointer-events: none;\n        background: transparent;\n      }\n    "])))},e.prototype.render=function(){var t=this,e=this.props,o=e.layout,n=e.layouts,i=e.restricted,u=e.className,p=e.style;return o?l.jsx(c.PageContext.Consumer,null,(function(e){t.pageContext=e;var c,f=o,g=!1;n[e.browserSizeMode]!==o.id&&t.layoutTransform&&(Object.keys(n).some((function(t){if(n[t]===o.id)return c=t,!0})),f=t.layoutTransform(o,c,e.browserSizeMode),g=!0);var h=l.lodash.assign({},y.DEFAULT_FIX_LAYOUT_SETTING,f.setting),v=f.order||[],m=l.classNames("layout fixed-layout d-flex",u);return l.jsx("div",{className:m,css:t.getStyle(),style:a(a(a({position:"relative",height:"auto",minHeight:i?"none":t.state.minHeight},p),d.styleUtils.toCSSStyle(h.style)),{width:"100%",overflow:"hidden"}),"data-layoutid":f.id,ref:function(e){return t.ref=e}},v.length>0&&l.jsx(l.OneByOneAnimation,{css:l.css(s||(s=r(["\n                  position: absolute;\n                  left: 0;\n                  right: 0;\n                  top: 0;\n                  bottom: 0;\n                "],["\n                  position: absolute;\n                  left: 0;\n                  right: 0;\n                  top: 0;\n                  bottom: 0;\n                "]))),"data-layoutid":o.id},v.map((function(e,o){return t.createItem(f,e,o,g)}))),l.jsx("div",{ref:function(e){return t.viewportRef=e},className:"viewport-area"}),l.jsx(l.ReactResizeDetector,{handleHeight:!0,handleWidth:!0,onResize:t.debounceResizeHandler}))})):null},e.defaultProps={restricted:!0},e}(o(38).FixedLayoutBase);e.default=l.ReactRedux.connect(f.mapStateToLayoutProps)(g)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(137);e.generateLayoutMap=n.generateLayoutMap,e.findLowestAncestor=n.findLowestAncestor,e.findParentLayoutItem=n.findParentLayoutItem;var i=o(23);e.findLayoutId=i.findLayoutId,e.findLayoutItem=i.findLayoutItem,e.findParentSectionId=i.findParentSectionId,e.findParentViewId=i.findParentViewId,e.getContentsInLayout=i.getContentsInLayout,e.getContentsInLayoutRecursive=i.getContentsInLayoutRecursive,e.getContainerLayoutItem=i.getContainerLayoutItem,e.getLayoutItemIds=i.getLayoutItemIds,e.getLayoutItemsByType=i.getLayoutItemsByType,e.getWidgetIdThatUseTheLayoutId=i.getWidgetIdThatUseTheLayoutId,e.getWidgetOrSectionContainerInfo=i.getWidgetOrSectionContainerInfo,e.getWidgetsOrSectionsInPageBody=i.getWidgetsOrSectionsInPageBody,e.getLayoutItemsInWidgetByLayoutInfo=i.getLayoutItemsInWidgetByLayoutInfo,e.getLayoutItemsHoldWidgetOrSection=i.getLayoutItemsHoldWidgetOrSection,e.getBrowserSizeModeByLayoutIdAndWidgetId=i.getBrowserSizeModeByLayoutIdAndWidgetId,e.getLayoutInfosInWidgetByLayoutInfo=i.getLayoutInfosInWidgetByLayoutInfo,e.getLayoutInfosInWidgetByWidgetOrSectionId=i.getLayoutInfosInWidgetByWidgetOrSectionId,e.getChildrenWidgetsOrSections=i.getChildrenWidgetsOrSections,e.getWidgetsOrSectionsInView=i.getWidgetsOrSectionsInView,e.getWidgetOrSectionLayoutInfosInOneSizeMode=i.getWidgetOrSectionLayoutInfosInOneSizeMode,e.getWidgetsOrSectionsInPageFooter=i.getWidgetsOrSectionsInPageFooter,e.getWidgetsOrSectionsInLayoutWithLayoutWidgetOnly=i.getWidgetsOrSectionsInLayoutWithLayoutWidgetOnly,e.getWidgetsOrSectionsInTheSameContainer=i.getWidgetsOrSectionsInTheSameContainer,e.getParentWidgetIdOfWidgetOrSection=i.getParentWidgetIdOfWidgetOrSection;var r=o(138);e.getSectionInfo=r.getSectionInfo;var a=o(139);e.getPendingLayoutItemsInPage=a.getPendingLayoutItemsInPage,e.getPendingLayoutItemsInLayoutWithDeep=a.getPendingLayoutItemsInLayoutWithDeep,e.getPendingLayoutItemsFromOtherSizeMode=a.getPendingLayoutItemsFromOtherSizeMode,e.getPendingLayoutItemsFromOtherSizeModeInPage=a.getPendingLayoutItemsFromOtherSizeModeInPage,e.getPendingLayoutItemsInDialog=a.getPendingLayoutItemsInDialog,e.getPendingLayoutItemsFromOtherSizeModeInDialog=a.getPendingLayoutItemsFromOtherSizeModeInDialog},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},u=this&&this.__rest||function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(o[n[i]]=t[n[i]])}return o};Object.defineProperty(e,"__esModule",{value:!0});var s,l,d=o(0),c=o(2),p=function(t){function e(e){var o=t.call(this,e)||this;return o.onMouseDown=o.onMouseDown.bind(o),o.ref=d.React.createRef(),o}return i(e,t),e.prototype.loadWidgetClass=function(){var t=this.props,e=t.widgetId,o=t.isClassLoaded;e&&!o&&d.WidgetManager.getInstance().loadWidgetClass(e)},e.prototype.componentDidMount=function(){this.loadWidgetClass()},e.prototype.componentDidUpdate=function(){this.loadWidgetClass()},e.prototype.renderWidgetContent=function(){var t,e=this.props,o=e.widgetId,n=e.layoutId,i=e.layoutItemId;return o&&(t=d.WidgetManager.getInstance().getWidgetClass(o)),d.jsx("div",{className:"widget-content"},t&&d.jsx(d.ErrorBoundary,null,d.jsx(t,{layoutId:n,layoutItemId:i})),!t&&d.jsx(c.Loading,null))},e.prototype.getStyle=function(){var t=d.css(s||(s=r(["\n      -webkit-overflow-scrolling: touch;\n    "],["\n      -webkit-overflow-scrolling: touch;\n    "])));return d.css(l||(l=r(["\n      ",";\n      overflow: ",";\n      position: relative;\n\n      &.aspect-ratio-wrapper {\n        padding-top: ","%;\n      }\n\n      .widget-content {\n        position: relative;\n        height: 100%;\n        width: 100%;\n        z-index: 0;\n      }\n\n      &.aspect-ratio-wrapper > .widget-content {\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n      }\n    "],["\n      ",";\n      overflow: ",";\n      position: relative;\n\n      &.aspect-ratio-wrapper {\n        padding-top: ","%;\n      }\n\n      .widget-content {\n        position: relative;\n        height: 100%;\n        width: 100%;\n        z-index: 0;\n      }\n\n      &.aspect-ratio-wrapper > .widget-content {\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n      }\n    "])),"app-loader"===this.props.widgetId?t:"",this.props.canCrossLayoutBoundary?"visible":"hidden",100*(this.props.aspectRatio||0))},e.prototype.onMouseDown=function(t){var e;(null===(e=d.getAppStore().getState().widgetsRuntimeInfo[this.props.widgetId])||void 0===e?void 0:e.state)!==d.WidgetState.Active&&d.getAppStore().dispatch(d.appActions.activateWidget(this.props.widgetId))},e.prototype.render=function(){var t=this.props,e=t.style,o=t.className,n=t.widgetStyle,i=t.widgetId,r=t.forceAspectRatio,s=t.aspectRatio,l=t.rotate,p=c.styleUtils.toCSSStyle(n),f=p.transform,y=u(p,["transform"]),g=l>0||l<0?"rotateZ("+l+"deg)":"",h=g;return f&&(h=f+" "+g),d.jsx("div",{className:d.classNames("widget-renderer w-100",o,{"aspect-ratio-wrapper":r&&s>0}),css:this.getStyle(),style:a(a(a({},e),y),{transform:h}),onMouseDownCapture:this.onMouseDown,"data-widgetid":i,ref:this.ref},this.renderWidgetContent(),this.props.children)},e}(d.React.PureComponent);e.WidgetRenderer=p},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),u=o(25),s=o(36),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(){return a.React.createElement(s.SectionRendererBase,r({},this.props,{layoutEntryComponent:u.default}))},e}(a.React.PureComponent);e.SectionRenderer=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(134),i=o(18);e.PageContext=i.PageContext,e.PageContextProps=i.PageContextProps;var r=o(135);e.LayoutContext=r.LayoutContext,e.LayoutContextProps=r.LayoutContextProps;var a=o(16);e.defaultMessages=a.default;var u=o(42);e.registerLayoutBuilder=u.registerLayoutBuilder,e.registerLayoutViewer=u.registerLayoutViewer,e.findLayoutBuilder=u.findLayoutBuilder,e.findLayoutViewer=u.findLayoutViewer;var s=o(59);e.FixedLayoutViewer=s.default;var l=o(61);e.WidgetRenderer=l.WidgetRenderer;var d=o(62);e.SectionRenderer=d.SectionRenderer;var c=o(140);e.PageRenderer=c.default;var p=o(25);e.LayoutEntry=p.default;var f=o(24);e.LayoutItem=f.default;var y=o(60);e.searchUtils=y;var g=o(4);e.utils=g,function(t){for(var o in t)e.hasOwnProperty(o)||(e[o]=t[o])}(o(8)),e.init=function(){return Promise.all([n.loadMessage()])}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),i=o(16);e.loadMessage=function(){var t=n.getAppStore().getState().appContext.locale;return(t=n.i18n.getLocaleToLoad(t,n.translatedLocales))?n.i18n.loadLocaleMessages("jimu-layouts/lib/translations",t).then((function(t){return n.getAppStore().dispatch(n.appActions.i18nMessagesLoaded("jimu-layouts",t)),t})):Promise.resolve(i.default)}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0);e.LayoutContext=n.React.createContext({})},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),u=o(4),s=o(10),l=o(24),d=o(21),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(){var t=this.props,e=t.layoutItem,o=t.layoutId,n=t.transformedBBox,i=t.isInFirstScreen,c=t.animationStyle,p=t.isPlaying;if(!e||e.isPending)return null;var f,y=a.lodash.assign({},s.DEFAULT_FIX_LAYOUT_ITEM_SETTING,e.setting),g=n||e.bbox;this.props.canBeFixed?(f=d.generateFixedStyle(g,this.props.isFixed,this.props.attach,this.props.containerWidth,this.props.containerHeight,y),this.props.isFixed&&null!=f.right&&(u.isPercentage(f.right)?f.right="calc("+f.right+" + "+this.props.scrollbarWidth+"px)":f.right="calc("+Math.round(parseFloat(f.right))+"px + "+this.props.scrollbarWidth+"px)")):f=d.generateBBoxStyle(g,y);var h=r(r({position:"absolute"},f),d.applyPositionSetting(e.bbox,y)),v=u.parseAspectRatio(y.aspectRatio),m=d.forceAspectRatio(e.bbox,y);return a.React.createElement(l.default,{style:h,layoutId:o,layoutItemId:e.id,forceAspectRatio:m,aspectRatio:v,resizeObserver:this.props.resizeObserver,isInFirstScreen:i,animationStyle:c,isPlaying:p,isInSection:this.props.isInSection})},e}(a.React.PureComponent);e.default=c},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=o(0),r=o(37);function a(t,e,o){var a,u=null===(a=null==e?void 0:e.layouts)||void 0===a?void 0:a[t];r(u,"rootLayout must exist");for(var s={},l={},d={},c=[{layoutId:t}],p=function(t){var r,a,u,p,f,y=null!==(u=null===(a=null===(r=null==e?void 0:e.layouts)||void 0===r?void 0:r[t.layoutId])||void 0===a?void 0:a.content)&&void 0!==u?u:{},g=n(n({},t),{embedLayouts:[]}),h=function(n){var r=y[n];if(r.type===i.LayoutItemType.Widget&&r.widgetId){var a=null===(p=null==e?void 0:e.widgets)||void 0===p?void 0:p[r.widgetId];if(a){var u={id:r.widgetId,type:i.LayoutItemType.Widget,itemIdInParent:n,containerLayoutId:t.layoutId};if(a.layouts)for(var s in u.embedLayouts=[],a.layouts){var h=a.layouts[s][o];u.embedLayouts.push(h),g.embedLayouts.push(h),c.push({layoutId:h,parentLayoutId:t.layoutId,itemIdInParent:n,parentType:i.LayoutItemType.Widget,containerWidgetId:r.widgetId})}l[r.widgetId]=u}}else if(r.type===i.LayoutItemType.Section&&r.sectionId){var v=null===(f=null==e?void 0:e.sections)||void 0===f?void 0:f[r.sectionId];if(v){var m={id:r.sectionId,type:i.LayoutItemType.Section,itemIdInParent:n,containerLayoutId:t.layoutId,embedLayouts:[]};v.views.forEach((function(a){var u,s,l=null===(u=null==e?void 0:e.views)||void 0===u?void 0:u[a],d=null===(s=null==l?void 0:l.layout)||void 0===s?void 0:s[o];m.embedLayouts.push(d),g.embedLayouts.push(d),c.push({layoutId:d,parentLayoutId:t.layoutId,parentType:i.LayoutItemType.Section,itemIdInParent:n,containerViewId:a,containerSectionId:r.sectionId})})),d[r.sectionId]=m}}};for(var v in y)h(v);s[t.layoutId]=g};c.length>0;){p(c.pop())}return{layouts:s,widgets:l,sections:d}}e.generateLayoutMap=a,e.findLowestAncestor=function(t,e,o){for(var n=e,i=t.layouts[n.parentLayoutId];null==i?void 0:i.parentLayoutId;){if(i.layoutId===o||i.embedLayouts.indexOf(o)>=0)return n;n=i,i=t.layouts[n.parentLayoutId]}return n},e.findParentLayoutItem=function(t,e,o,n){var i=t.layoutId,r=a(o,e,n).layouts[i];return(null==r?void 0:r.parentLayoutId)?{layoutId:r.parentLayoutId,layoutItemId:r.itemIdInParent}:null}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSectionInfo=function(t,e){var o,n=t.appConfig.sections[e];if(!n||!n.views)return null;var i,r=null===(o=t.appRuntimeInfo.sectionNavInfos)||void 0===o?void 0:o[n.id];if(!r){var a=t.appRuntimeInfo.currentViewId,u=n.views.indexOf(a)>=0?a:n.views[0];i=t.appConfig.views[u]}return{sectionId:e,navInfo:r,activeView:i,views:n.views,sectionStyle:n.style,transition:n.transition}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),i=o(23);function r(t,e,o){var a=[];return i.getLayoutItemsByType(t.layouts[e],n.LayoutItemType.Widget,!0).forEach((function(e){var n=t.layouts[e.layoutId].content[e.layoutItemId];n.isPending?a.push(e):t.widgets[n.widgetId].layouts&&Object.keys(t.widgets[n.widgetId].layouts).forEach((function(e){a=a.concat(r(t,t.widgets[n.widgetId].layouts[e][o],o))}))})),i.getLayoutItemsByType(t.layouts[e],n.LayoutItemType.Section,!0).forEach((function(e){var n=t.layouts[e.layoutId].content[e.layoutItemId];n.isPending?a.push(e):t.sections[n.sectionId].views&&t.sections[n.sectionId].views.forEach((function(e){a=a.concat(r(t,t.views[e].layout[o],o))}))})),a}function a(t,e,o,r,s){void 0===r&&(r=null),void 0===s&&(s=null);var l=[];return r||(r=i.getContentsInLayoutRecursive(t,e[o],n.LayoutItemType.Widget,o,!0)),s||(s=i.getContentsInLayoutRecursive(t,e[o],n.LayoutItemType.Section,o,!0)),Object.keys(n.BrowserSizeMode).filter((function(t){return n.BrowserSizeMode[t]!==o})).map((function(t){return n.BrowserSizeMode[t]})).forEach((function(d){i.getLayoutItemsByType(t.layouts[e[d]],n.LayoutItemType.Widget,!0).forEach((function(e){var i=t.layouts[e.layoutId].content[e.layoutItemId];t.widgets[i.widgetId].manifest.widgetType!==n.WidgetType.Layout&&r.indexOf(i.widgetId)<0?!u(t,l,e)&&l.push(e):t.widgets[i.widgetId].layouts&&Object.keys(t.widgets[i.widgetId].layouts).forEach((function(e){a(t,t.widgets[i.widgetId].layouts[e],o,r,s).forEach((function(e){!u(t,l,e)&&l.push(e)}))}))})),i.getLayoutItemsByType(t.layouts[e[d]],n.LayoutItemType.Section,!0).forEach((function(e){var n=t.layouts[e.layoutId].content[e.layoutItemId];s.indexOf(n.sectionId)<0?!u(t,l,e)&&l.push(e):t.sections[n.sectionId].views&&t.sections[n.sectionId].views.forEach((function(e){a(t,t.views[e].layout,o,r,s).forEach((function(e){!u(t,l,e)&&l.push(e)}))}))}))})),l}function u(t,e,o){var i=t.layouts[o.layoutId].content[o.layoutItemId];return!!e.find((function(e){var o=t.layouts[e.layoutId].content[e.layoutItemId];return o.type===i.type&&(o.type===n.LayoutItemType.Widget&&o.widgetId===i.widgetId||o.type===n.LayoutItemType.Section&&o.sectionId===i.sectionId)}))}e.getPendingLayoutItemsInPage=function(t,e,o,i){var a=t.pages[e];return a?i===n.PagePart.Header?a.header&&t.header?r(t,t.header.layout[o],o):[]:i===n.PagePart.Footer?a.footer&&t.footer?r(t,t.footer.layout[o],o):[]:i===n.PagePart.Body?r(t,a.layout[o],o):[]:[]},e.getPendingLayoutItemsFromOtherSizeModeInPage=function(t,e,o,i){var r=t.pages[e];return r?i===n.PagePart.Header?r.header&&t.header?a(t,t.header.layout,o):[]:i===n.PagePart.Footer?r.footer&&t.footer?a(t,t.footer.layout,o):[]:i===n.PagePart.Body?a(t,r.layout,o):[]:[]},e.getPendingLayoutItemsInDialog=function(t,e,o){var n=t.dialogs[e];return n?r(t,n.layout[o],o):[]},e.getPendingLayoutItemsFromOtherSizeModeInDialog=function(t,e,o){var n=t.dialogs[e];return n?a(t,n.layout,o):[]},e.getPendingLayoutItemsInLayoutWithDeep=r,e.getPendingLayoutItemsFromOtherSizeMode=a},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),u=o(59),s=o(40),l=o(141),d=o(146),c=o(18),p=o(42),f=o(25),y=o(150);p.registerLayoutViewer(a.LayoutType.FixedLayout,u.default),p.registerLayoutViewer(a.LayoutType.FlowLayout,l.default),p.registerLayoutViewer(a.LayoutType.GridLayout,d.default);var g=function(t){function e(e){var o=t.call(this,e)||this;return a.ExtensionManager.getInstance().registerExtension({epName:a.extensionSpec.ExtensionPoints.LayoutTransformer,extension:new s.FlowLayoutTransformer}),o}return i(e,t),e.prototype.render=function(){var t=this,e=this.props,o=e.pageStatus,n=e.pages,i=e.theme,r=e.isDesignMode;this.pageContext={isDesignMode:r,theme:i,mainSizeMode:this.props.mainSizeMode,browserSizeMode:this.props.browserSizeMode};var u="100%",s=n[v(o)]||{};s&&!isNaN(+s.width)&&(u=+s.width);var l={width:u,margin:"0 auto",minHeight:"100%",overflow:"auto",height:"100%",backgroundColor:s&&s.backgroundColor};return a.jsx("div",{className:"page-renderer d-flex flex-column",css:l},this.renderDialog(),this.renderHeader(),Object.keys(o).map((function(e){return t.renderPageBody(e,i)})),this.renderFooter())},e.prototype.renderHeader=function(){var t;if(!this.props.header)return null;var e=this.props,o=e.header,n=e.headerVisible,i=e.browserSizeMode,u=e.theme,s=e.mainSizeMode,l=o.height[i]||o.height[s]||50,d=h(o),p={display:n?"flex":"none",position:o.sticky?"sticky":"relative",zIndex:o.sticky?1:"auto",top:0,width:"100%",minHeight:parseFloat(""+l),height:"auto",overflow:"hidden",backgroundColor:o.backgroundColor||this.props.theme.header.bg||"transparent",backgroundImage:o.backgroundIMage||void 0,backgroundPosition:o.backgroundPosition,color:null===(t=null==u?void 0:u.header)||void 0===t?void 0:t.color,flex:"0 0 auto"};return a.jsx(c.PageContext.Provider,{value:r(r({},this.pageContext),{viewOnly:!0,visible:n})},a.jsx("div",{className:"header",style:p},a.jsx(f.default,{layouts:d,className:"w-100 flex-grow-1"})))},e.prototype.renderFooter=function(){var t;if(!this.props.footer)return null;var e=this.props,o=e.footer,n=e.footerVisible,i=e.browserSizeMode,u=e.mainSizeMode,s=e.theme,l=o.height[i]||o.height[u]||50,d=h(o),p=void 0;o.backgroundIMage&&("string"==typeof o.backgroundIMage?p=o.backgroundIMage:"object"==typeof o.backgroundIMage&&(p=o.backgroundIMage.url));var y={display:n?"flex":"none",width:"100%",minHeight:parseFloat(""+l),height:"auto",overflow:"hidden",backgroundColor:o.backgroundColor||this.props.theme.footer.bg||"transparent",backgroundImage:p,backgroundPosition:o.backgroundPosition,color:null===(t=null==s?void 0:s.footer)||void 0===t?void 0:t.color};return a.jsx(c.PageContext.Provider,{value:r(r({},this.pageContext),{viewOnly:!0,visible:n})},a.jsx("div",{className:"footer",css:y},a.jsx(f.default,{layouts:d,className:"w-100 flex-grow-1"})))},e.prototype.renderPageBody=function(t,e){var o=this.props,n=o.pageStatus,i=o.pages[t];if(i){var r=!!n[t];return a.jsx(y.PageBody,{key:i.id,pageJson:i,pageContext:this.pageContext,visible:r})}},e.prototype.renderDialog=function(){var t=this.props,e=t.dialogs,o=t.dialogId,n=t.pages,i=t.pageStatus,u=e[o],s=e[Object.keys(e).find((function(t){return e[t].isSplash}))],l="";Object.keys(i).some((function(t){if(!0===i[t])return l=n[t].autoOpenDialogId,!0}));var d=e[Object.keys(e).find((function(t){return e[t].id===l}))];return a.jsx(a.React.Fragment,null,u&&a.jsx(c.PageContext.Provider,{value:r(r({},this.pageContext),{dialogId:o,viewOnly:!0,visible:!0})},a.jsx(a.AppDialog,{dialogJson:u,runtime:!0})),d&&(null==u?void 0:u.id)!==d.id&&a.jsx(c.PageContext.Provider,{value:r(r({},this.pageContext),{dialogId:l,viewOnly:!0,visible:!0})},a.jsx(a.AppDialog,{dialogJson:d,runtime:!0,isOpenByPage:!0})),s&&(null==u?void 0:u.id)!==s.id&&a.jsx(c.PageContext.Provider,{value:r(r({},this.pageContext),{dialogId:s.id,viewOnly:!0,visible:!0})},a.jsx(a.AppDialog,{dialogJson:s,runtime:!0})))},e.displayName="RuntimePageRenderer",e}(a.React.PureComponent);function h(t){return t?t.layout:null}function v(t){return Object.keys(t).find((function(e){return!0===t[e]}))}e.default=a.ReactRedux.connect((function(t,e){var o=v(e.pageStatus);return{pages:t.appConfig.pages,header:t.appConfig.header,headerVisible:!!t.appConfig.pages[o].header,footer:t.appConfig.footer,footerVisible:!!t.appConfig.pages[o].footer,isDesignMode:!1,browserSizeMode:t.browserSizeMode,mainSizeMode:t.appConfig.mainSizeMode,theme:t.theme,dialogs:t.appConfig.dialogs}}))(g)},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var u,s=o(0),l=o(2),d=o(142),c=o(143),p=o(144),f=o(15),y=o(4),g=o(18),h=function(t){function e(e){var o,n=t.call(this,e)||this,i=s.ExtensionManager.getInstance().getExtensions(""+s.extensionSpec.ExtensionPoints.LayoutTransformer);if(i&&i.length>0){var r=i.find((function(t){return t.layoutType===n.props.layout.type}));n.layoutTransform=null===(o=r)||void 0===o?void 0:o.transformLayout}return n}return i(e,t),e.prototype._createItem=function(t,e,o){var n,i=this.props.layout;return(null===(n=t.setting)||void 0===n?void 0:n.isFloating)?s.jsx(c.default,{key:t.id,index:e,gutter:o.gutter,layoutId:i.id,layoutItemId:t.id,layoutItem:t}):t.type===s.LayoutItemType.Section?s.jsx(p.default,{key:t.id+"_"+e,layoutId:i.id,layoutItemId:t.id,itemIndex:e}):s.jsx(d.default,{key:t.id,index:e,gutter:o.gutter,layoutId:i.id,layoutItemId:t.id,layoutItem:t})},e.prototype.render=function(){var t=this,e=this.props,o=e.layout,n=e.className,i=e.style,d=e.layouts;return o?s.jsx(g.PageContext.Consumer,null,(function(e){var c,p=o;d[e.browserSizeMode]!==o.id&&t.layoutTransform&&(Object.keys(d).some((function(t){if(d[t]===o.id)return c=t,!0})),p=t.layoutTransform(o,c,e.browserSizeMode));var y=p.order||[],g=s.lodash.assign({},f.DEFAULT_FLOW_SETTING,p.setting),h=a(a(a({},i),l.styleUtils.toCSSStyle(g.style)),{position:"relative"}),v=s.classNames("layout flow-layout w-100",n);return s.jsx("div",{className:v,style:h,"data-layoutid":o.id},s.jsx(s.OneByOneAnimation,{"data-layoutid":p.id,className:"trail-container d-flex flex-column align-items-center",css:s.css(u||(u=r(["\n                  width: 100%;\n                "],["\n                  width: 100%;\n                "])))},y.map((function(e,o){return t._createItem(p.content[e],o,g)}))))})):null},e}(s.React.PureComponent);e.default=s.ReactRedux.connect(y.mapStateToLayoutProps)(h)},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),u=o(15),s=o(22),l=o(24),d=o(22),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.calHeight=function(t){var e=this.props.layoutItem.bbox||{};switch(t.heightMode){case"auto":return{height:"auto"};case"fixed":return{height:e.height}}},e.prototype.render=function(){var t=this.props,e=t.layoutId,o=t.index,n=t.gutter,i=t.layoutItem,s=t.onClick,c=t.isEmpty;if(!i||c)return null;var p=a.classNames("flow-layout-item","d-flex"),f=a.lodash.assign({},u.DEFAULT_FLOW_ITEM_SETTING,i.setting),y=r({marginTop:o>0?n:"unset",width:""+d.getWidthFromSetting(f),flexShrink:0},this.calHeight(f));return(f.offsetX||f.offsetY)&&(y.transform="translate("+(f.offsetX||0)+"px, "+(f.offsetY||0)+"px)"),a.React.createElement(l.default,{style:y,layoutId:e,layoutItemId:i.id,onClick:s,className:p,isPlaying:this.props.isPlaying,animationStyle:this.props.animationStyle})},e}(a.React.PureComponent);e.default=a.ReactRedux.connect(s.mapStateToFlowItemProps)(c)},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(0),a=o(24),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.calculatePosition=function(){var t,e,o,n,i,r,a=this.props.layoutItem,u=null!==(e=null===(t=a.setting)||void 0===t?void 0:t.floatingArea)&&void 0!==e?e:1,s=null!==(n=null===(o=a.setting)||void 0===o?void 0:o.offsetX)&&void 0!==n?n:0,l=null!==(r=null===(i=a.setting)||void 0===i?void 0:i.offsetY)&&void 0!==r?r:0,d={position:"fixed",zIndex:1,width:a.bbox.width,height:a.bbox.height};switch(u){case 1:d.left=s,d.top=l;break;case 2:d.left="50%",d.top=l,d.transform="translateX(calc(-50% + "+s+"px))";break;case 3:d.right=s,d.top=l;break;case 4:d.left=s,d.top="50%",d.transform="translateY(calc(-50% + "+l+"px))";break;case 5:d.left="50%",d.top="50%",d.transform="translate(calc(-50% + "+s+"px), calc(-50% + "+l+"px))";break;case 6:d.right=s,d.top="50%",d.transform="translateY(calc(-50% + "+l+"px))";break;case 7:d.left=s,d.bottom=l;break;case 8:d.left="50%",d.bottom=l,d.transform="translateX(calc(-50% + "+s+"px))";break;case 9:d.right=s,d.bottom=l}return d},e.prototype.render=function(){var t=this.props,e=t.layoutId,o=t.layoutItem,n=t.onClick;if(!o)return null;var i=r.classNames("flow-layout-item","d-flex");return r.React.createElement(a.default,{style:this.calculatePosition(),layoutId:e,layoutItemId:o.id,onClick:n,className:i})},e}(r.React.PureComponent);e.default=u},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};Object.defineProperty(e,"__esModule",{value:!0});var a,u=o(0),s=o(145),l=o(4),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getStyle=function(){return u.css(a||(a=r(["\n      position: relative;\n      width: 100%;\n      min-height: 100vh;\n    "],["\n      position: relative;\n      width: 100%;\n      min-height: 100vh;\n    "])))},e.prototype.createView=function(t,e){var o,n=this.props.layoutItem.setting;return u.jsx(s.default,{key:t,viewId:t,setting:null===(o=null==n?void 0:n.itemSettings)||void 0===o?void 0:o[e],isInFirstScreen:0===this.props.itemIndex&&0===e})},e.prototype.render=function(){var t=this,e=this.props.section;return u.jsx("div",{css:this.getStyle()},e.views.map((function(e,o){return t.createView(e,o)})))},e}(u.React.PureComponent);e.default=u.ReactRedux.connect((function(t,e){var o=l.mapStateToLayoutItemProps(t,e),n=o.layoutItem.sectionId,i=t.appConfig.sections;return{layoutItem:o.layoutItem,section:i[n]}}))(d)},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var u,s=o(0),l=o(2),d=o(25),c=o(29),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getBackgroundStyle=function(){var t=this.props.view,e={};t.backgroundIMage&&(e="string"==typeof t.backgroundIMage?{}:t.backgroundIMage);var o=t.backgroundPosition?l.FillType[t.backgroundPosition.toUpperCase()]:l.FillType.FILL,n={color:t.backgroundIMage||t.backgroundColor?t.backgroundColor:"#FFF",fillType:o,image:e};return l.styleUtils.toBackgroundStyle(n)},e.prototype.calPositionStyle=function(t){return"sticky"===t.position?{position:"sticky",top:0}:{position:"relative"}},e.prototype.getStyle=function(){return s.css(u||(u=r(["\n      .view-content {\n        min-height: 100vh;\n      }\n    "],["\n      .view-content {\n        min-height: 100vh;\n      }\n    "])))},e.prototype.render=function(){var t=this.props,e=t.viewId,o=t.view,n=t.setting,i=t.isInFirstScreen,r=o.layout,u=s.lodash.assign({},c.DEFAULT_VIEW_ITEM_SETTING,n);return s.jsx("div",{className:"d-flex flex-column section-view",style:a(a({},this.getBackgroundStyle()),this.calPositionStyle(u)),css:this.getStyle(),key:e},s.jsx(s.ErrorBoundary,null,s.jsx("div",{className:"d-flex view-content"},s.jsx(d.default,{layouts:r,isInSection:!0,isInFirstScreen:i,ignoreMinHeight:!0,restricted:!1,className:"w-100"}))))},e}(s.React.PureComponent);e.ViewRenderer=p,e.default=s.ReactRedux.connect((function(t,e){var o=e.viewId;return{view:t.appConfig.views[o]}}))(p)},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=o(0),u=o(2),s=o(147),l=o(4),d=o(9),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(){var t,e,o=this.props,n=o.layout,i=o.className,l=a.lodash.assign({},d.DEFAULT_GRID_SETTING,n.setting&&n.setting.splitter),c=null===(t=n.setting)||void 0===t?void 0:t.style,p=null===(e=n.setting)||void 0===e?void 0:e.rootItemId,f=r(r({position:"relative"},u.styleUtils.toCSSStyle(c)),{overflow:"hidden"}),y=a.classNames("layout grid-layout d-flex w-100",i);return a.jsx("div",{className:y,style:f,"data-layoutid":n.id},p&&a.jsx(s.GridContainer,{layoutId:n.id,layoutItemId:p,splitterSize:l.size,splitterColor:l.color}))},e}(a.React.PureComponent);e.default=a.ReactRedux.connect(l.mapStateToLayoutProps)(c)},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(0),a=o(9),u=o(148),s=o(149),l=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return i(o,t),o.prototype.createItems=function(t,o){var n=this.props,i=n.layoutId,a=n.layoutItem,l=n.splitterColor,d=n.splitterSize,c=[];return t.forEach((function(n,p){var f=o.indexOf(n)>=0?e.GridContainer:u.default;c.push(r.React.createElement(f,{key:n,layoutId:i,layoutItemId:n})),p!==t.length-1&&c.push(r.React.createElement(s.Splitter,{key:n+"_splitter",layoutId:i,direction:a.direction,prevItemId:t[p],nextItemId:t[p+1],size:d,color:l}))})),c},o.prototype.render=function(){var t=this,e=this.props,o=e.layoutItem,n=e.subContainerIds;if(!o)return null;var i=o.items&&o.items.length>0?o.items:[o.id],u=n.split(","),s=r.classNames("grid-container d-flex justify-content-start",{"flex-column":o.direction===a.Direction.Vertical}),l={width:o.bbox.width,height:o.bbox.height,flexShrink:1,flexGrow:1};return r.React.createElement("div",{className:s,"data-layoutitemid":o.id,"data-layoutid":this.props.layoutId,style:l,ref:function(e){return t.ref=e}},this.createItems(i,u))},o}(r.React.PureComponent);function d(t,e){var o=e.layoutId,n=e.layoutItemId,i=t.appConfig.layouts[o],r=i.content[n],a=[];return r&&r.items&&r.items.forEach((function(t){var e=i.content[t];e&&e.items&&a.push(t)})),{layoutItem:r,subContainerIds:a.join(",")}}e.mapStateToContainerProps=d,e.GridContainer=r.ReactRedux.connect(d)(l)},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=o(0),a=o(4),u=o(24),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(){var t=this.props,e=t.layoutId,o=t.layoutItem;if(!o)return null;var n={position:"relative",width:o.bbox.width,height:o.bbox.height,flexShrink:1,flexGrow:1};return r.jsx(u.default,{style:n,layoutId:e,layoutItemId:o.id,onClick:this.props.onClick})},e}(r.React.PureComponent);e.default=r.ReactRedux.connect(a.mapStateToLayoutItemProps)(s)},function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};Object.defineProperty(e,"__esModule",{value:!0});var a,u=o(0),s=o(8),l=o(9),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getStyle=function(){var t=this.props,e=t.direction,o=t.size,n=t.color,i=o+"px";return u.css(a||(a=r(["\n      width: ",";\n      height: ",";\n      background: ",";\n      position: relative;\n      z-index: ",";\n\n      .horizontal-splitter {\n        width: 15px;\n        height: 100%;\n        position: absolute;\n        left: -5px;\n      }\n\n      .vertical-splitter {\n        width: 100%;\n        height: 15px;\n        position: absolute;\n        top: -5px;\n      }\n    "],["\n      width: ",";\n      height: ",";\n      background: ",";\n      position: relative;\n      z-index: ",";\n\n      .horizontal-splitter {\n        width: 15px;\n        height: 100%;\n        position: absolute;\n        left: -5px;\n      }\n\n      .vertical-splitter {\n        width: 100%;\n        height: 15px;\n        position: absolute;\n        top: -5px;\n      }\n    "])),e===l.Direction.Vertical?"100%":i,e===l.Direction.Vertical?i:"100%",n,s.LayoutZIndex.HandlerTools)},e.prototype.render=function(){var t=this,e=this.props.direction;return u.jsx("div",{ref:function(e){return t.ref=e},css:this.getStyle()},u.jsx("div",{className:u.classNames({"horizontal-splitter":e===l.Direction.Horizontal,"vertical-splitter":e===l.Direction.Vertical})}))},e}(u.React.PureComponent);e.Splitter=d},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=o(0),r=o(18),a=o(25);e.PageBody=function(t){var e=t.pageJson,o=t.visible,u=t.pageContext,s=i.React.useState(Symbol("init")),l=s[0],d=s[1],c=i.ReactRedux.useSelector((function(t){return function(t,e){var o=t.appRuntimeInfo.animationPreview;return(null==o?void 0:o.pageId)===e?o.id:null}(t,e.id)}));i.React.useRef().current=c;var p=e.layout;if(i.React.useEffect((function(){d(Symbol("autoplay when switching to visible"))}),[o]),p){var f;e.mode!==i.PageMode.FitWindow&&e.maxWidth>0&&(f=e.maxWidth);var y=e.oneByOneEffect&&e.oneByOneEffect.type!==i.AnimationType.None?e.oneByOneEffect:null,g=y?o?y.type:i.AnimationType.FadeOut:null;return i.jsx(r.PageContext.Provider,{key:e.id,value:n(n({},u),{maxWidth:f,visible:o,viewOnly:!0})},i.jsx("div",{id:e.id,"data-pageid":e.id,className:"page",style:{display:o?"flex":"none",backgroundColor:e.bodyBackgroundColor||"transparent",height:"auto",flex:"1 0 auto"}},i.jsx(i.AnimationContext.Provider,{value:{isDesignMode:!1,trigger:i.AnimationTriggerType.Manual,setting:n(n({},y),{type:g}),inheritedOneByOneSetting:null,playId:l,depth:0}},i.jsx(a.default,{layouts:p,className:"w-100 flex-grow-1",style:{margin:"0 auto",backgroundColor:"transparent"}}))))}}}])}));